"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const Request_1 = require("../Request");
class Session {
    constructor(connection, xmlmc) {
        this.connection = connection;
        this.xmlmc = xmlmc;
        this.service = 'session';
        this.paramMap = new Map([['analystLogoff', ['sessionId',]], ['analystLogon', ['userId', 'password',]], ['analystLogonTrust', ['userId', 'secretKey',]], ['bindSession', ['sessionId',]], ['changePassword', ['oldPassword', 'newPassword',]], ['convertDateTimeInText', ['inputText',]], ['getSessionInfo', ['sessionId',]], ['getSessionInfo2', ['sessionId',]], ['hasRight', ['userRight',]], ['isSessionValid', ['sessionId',]], ['lockCustomerAccount', ['selfServiceInstance', 'customerId', 'permanent', 'duration',]], ['selfServiceLogon', ['selfServiceInstance', 'customerId', 'password',]], ['setDatabaseRight', ['tableName', 'rightFlag', 'rightAllowed',]], ['setOutputValidation', ['validateResultMessage',]], ['setUserRight', ['rightClass', 'rightFlag', 'rightAllowed',]], ['setVariable', ['sessionVariable',]], ['switchAnalystContext', ['groupId', 'analystId',]], ['unlockCustomerAccount', ['selfServiceInstance', 'customerId',]],]);
    }
    analystLogoff(optionalParams) {
        let request = new Request_1.Request(this.service, 'analystLogoff', (optionalParams || {}), this.paramMap.get('analystLogoff') || []);
        return this.connection.sendRequest(request);
    }
    analystLogon(userId, password, optionalParams) {
        let request = new Request_1.Request(this.service, 'analystLogon', Object.assign({}, {
            userId,
            password
        }, optionalParams || {}), this.paramMap.get('analystLogon') || []);
        return this.connection.sendRequest(request);
    }
    analystLogonTrust(userId, secretKey, optionalParams) {
        let request = new Request_1.Request(this.service, 'analystLogonTrust', Object.assign({}, {
            userId,
            secretKey
        }, optionalParams || {}), this.paramMap.get('analystLogonTrust') || []);
        return this.connection.sendRequest(request);
    }
    bindSession(sessionId, optionalParams) {
        let request = new Request_1.Request(this.service, 'bindSession', Object.assign({}, { sessionId }, optionalParams || {}), this.paramMap.get('bindSession') || []);
        return this.connection.sendRequest(request);
    }
    changePassword(oldPassword, newPassword, optionalParams) {
        let request = new Request_1.Request(this.service, 'changePassword', Object.assign({}, {
            oldPassword,
            newPassword
        }, optionalParams || {}), this.paramMap.get('changePassword') || []);
        return this.connection.sendRequest(request);
    }
    closeLocalSession(optionalParams) {
        let request = new Request_1.Request(this.service, 'closeLocalSession', (optionalParams || {}), this.paramMap.get('closeLocalSession') || []);
        return this.connection.sendRequest(request);
    }
    convertDateTimeInText(inputText, optionalParams) {
        let request = new Request_1.Request(this.service, 'convertDateTimeInText', Object.assign({}, { inputText }, optionalParams || {}), this.paramMap.get('convertDateTimeInText') || []);
        return this.connection.sendRequest(request);
    }
    createLocalSession(optionalParams) {
        let request = new Request_1.Request(this.service, 'createLocalSession', (optionalParams || {}), this.paramMap.get('createLocalSession') || []);
        return this.connection.sendRequest(request);
    }
    getSessionDDInfo(optionalParams) {
        let request = new Request_1.Request(this.service, 'getSessionDDInfo', (optionalParams || {}), this.paramMap.get('getSessionDDInfo') || []);
        return this.connection.sendRequest(request);
    }
    getSessionInfo(optionalParams) {
        let request = new Request_1.Request(this.service, 'getSessionInfo', (optionalParams || {}), this.paramMap.get('getSessionInfo') || []);
        return this.connection.sendRequest(request);
    }
    getSessionInfo2(optionalParams) {
        let request = new Request_1.Request(this.service, 'getSessionInfo2', (optionalParams || {}), this.paramMap.get('getSessionInfo2') || []);
        return this.connection.sendRequest(request);
    }
    hasRight(userRight, optionalParams) {
        let request = new Request_1.Request(this.service, 'hasRight', Object.assign({}, { userRight }, optionalParams || {}), this.paramMap.get('hasRight') || []);
        return this.connection.sendRequest(request);
    }
    isSessionValid(optionalParams) {
        let request = new Request_1.Request(this.service, 'isSessionValid', (optionalParams || {}), this.paramMap.get('isSessionValid') || []);
        return this.connection.sendRequest(request);
    }
    lockCustomerAccount(selfServiceInstance, customerId, permanent, optionalParams) {
        let request = new Request_1.Request(this.service, 'lockCustomerAccount', Object.assign({}, {
            selfServiceInstance,
            customerId,
            permanent
        }, optionalParams || {}), this.paramMap.get('lockCustomerAccount') || []);
        return this.connection.sendRequest(request);
    }
    selfServiceLogoff(optionalParams) {
        let request = new Request_1.Request(this.service, 'selfServiceLogoff', (optionalParams || {}), this.paramMap.get('selfServiceLogoff') || []);
        return this.connection.sendRequest(request);
    }
    selfServiceLogon(selfServiceInstance, customerId, password, optionalParams) {
        let request = new Request_1.Request(this.service, 'selfServiceLogon', Object.assign({}, {
            selfServiceInstance,
            customerId,
            password
        }, optionalParams || {}), this.paramMap.get('selfServiceLogon') || []);
        return this.connection.sendRequest(request);
    }
    setDatabaseRight(tableName, rightFlag, rightAllowed, optionalParams) {
        let request = new Request_1.Request(this.service, 'setDatabaseRight', Object.assign({}, {
            tableName,
            rightFlag,
            rightAllowed
        }, optionalParams || {}), this.paramMap.get('setDatabaseRight') || []);
        return this.connection.sendRequest(request);
    }
    setOutputValidation(validateResultMessage, optionalParams) {
        let request = new Request_1.Request(this.service, 'setOutputValidation', Object.assign({}, { validateResultMessage }, optionalParams || {}), this.paramMap.get('setOutputValidation') || []);
        return this.connection.sendRequest(request);
    }
    setUserRight(rightClass, rightFlag, rightAllowed, optionalParams) {
        let request = new Request_1.Request(this.service, 'setUserRight', Object.assign({}, {
            rightClass,
            rightFlag,
            rightAllowed
        }, optionalParams || {}), this.paramMap.get('setUserRight') || []);
        return this.connection.sendRequest(request);
    }
    setVariable(sessionVariable, optionalParams) {
        let request = new Request_1.Request(this.service, 'setVariable', Object.assign({}, { sessionVariable }, optionalParams || {}), this.paramMap.get('setVariable') || []);
        return this.connection.sendRequest(request);
    }
    switchAnalystContext(groupId, optionalParams) {
        let request = new Request_1.Request(this.service, 'switchAnalystContext', Object.assign({}, { groupId }, optionalParams || {}), this.paramMap.get('switchAnalystContext') || []);
        return this.connection.sendRequest(request);
    }
    unlockCustomerAccount(selfServiceInstance, customerId, optionalParams) {
        let request = new Request_1.Request(this.service, 'unlockCustomerAccount', Object.assign({}, {
            selfServiceInstance,
            customerId
        }, optionalParams || {}), this.paramMap.get('unlockCustomerAccount') || []);
        return this.connection.sendRequest(request);
    }
}
exports.Session = Session;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU2Vzc2lvbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9zZXJ2aWNlcy9TZXNzaW9uLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBS0Esd0NBQWtDO0FBRzlCO0lBTUksWUFBWSxVQUFzQixFQUFFLEtBQVk7UUFDNUMsSUFBSSxDQUFDLFVBQVUsR0FBRyxVQUFVLENBQUM7UUFDN0IsSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7UUFDbkIsSUFBSSxDQUFDLE9BQU8sR0FBRyxTQUFTLENBQUM7UUFDekIsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLEdBQUcsQ0FBQyxDQUFDLENBQUMsZUFBZSxFQUFFLENBQUMsV0FBVyxFQUFFLENBQUMsRUFBRSxDQUFDLGNBQWMsRUFBRSxDQUFDLFFBQVEsRUFBRSxVQUFVLEVBQUUsQ0FBQyxFQUFFLENBQUMsbUJBQW1CLEVBQUUsQ0FBQyxRQUFRLEVBQUUsV0FBVyxFQUFFLENBQUMsRUFBRSxDQUFDLGFBQWEsRUFBRSxDQUFDLFdBQVcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDLGFBQWEsRUFBRSxhQUFhLEVBQUUsQ0FBQyxFQUFFLENBQUMsdUJBQXVCLEVBQUUsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxFQUFFLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxFQUFFLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxFQUFFLENBQUMsVUFBVSxFQUFFLENBQUMsV0FBVyxFQUFFLENBQUMsRUFBRSxDQUFDLGdCQUFnQixFQUFFLENBQUMsV0FBVyxFQUFFLENBQUMsRUFBRSxDQUFDLHFCQUFxQixFQUFFLENBQUMscUJBQXFCLEVBQUUsWUFBWSxFQUFFLFdBQVcsRUFBRSxVQUFVLEVBQUUsQ0FBQyxFQUFFLENBQUMsa0JBQWtCLEVBQUUsQ0FBQyxxQkFBcUIsRUFBRSxZQUFZLEVBQUUsVUFBVSxFQUFFLENBQUMsRUFBRSxD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QUFDLE9BQU8sQ0FBQyxDQUFBO0lBQy9DLENBQUM7SUFFRCxvQkFBb0IsQ0FBQyxPQUFlLEVBQUUsY0FBc0Q7UUFDeEYsSUFBSSxPQUFPLEdBQUcsSUFBSSxpQkFBTyxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsc0JBQXNCLEVBQWUsTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsRUFBQyxPQUFPLEVBQUMsRUFBRSxjQUFjLElBQUksRUFBRSxDQUFDLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsc0JBQXNCLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQztRQUNsTCxNQUFNLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLENBQUE7SUFDL0MsQ0FBQztJQUVELHFCQUFxQixDQUFDLG1CQUEyQixFQUFFLFVBQWtCLEVBQUUsY0FBdUQ7UUFDMUgsSUFBSSxPQUFPLEdBQUcsSUFBSSxpQkFBTyxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsdUJBQXVCLEVBQWUsTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUU7WUFDNUYsbUJBQW1CO1lBQ25CLFVBQVU7U0FDYixFQUFFLGNBQWMsSUFBSSxFQUFFLENBQUMsRUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyx1QkFBdUIsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDO1FBQzVFLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsQ0FBQTtJQUMvQyxDQUFDO0NBQ0o7QUF0SkQsMEJBc0pDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgcGFyYW1UeXBlcyBmcm9tICcuLi90eXBlcy9TZXNzaW9uVHlwZXMnXG5pbXBvcnQge0F4aW9zRXJyb3IsIEF4aW9zUmVzcG9uc2V9IGZyb20gXCJheGlvc1wiO1xuaW1wb3J0IHtYbWxtY1BhcmFtc30gZnJvbSBcIi4uL3R5cGVzL1htbG1jVHlwZXNcIjtcbmltcG9ydCB7Q29ubmVjdGlvbiwgWG1sbWNSZXNwb25zZX0gZnJvbSAnLi4vQ29ubmVjdGlvbidcbmltcG9ydCBYbWxtYyBmcm9tICcuLi9YbWxNZXRob2RDYWxsJ1xuaW1wb3J0IHtSZXF1ZXN0fSBmcm9tICcuLi9SZXF1ZXN0J1xuXG5cbiAgICBleHBvcnQgY2xhc3MgU2Vzc2lvbiB7XG4gICAgICAgIHByaXZhdGUgY29ubmVjdGlvbjogQ29ubmVjdGlvbjtcbiAgICAgICAgcHJpdmF0ZSB4bWxtYzogWG1sbWM7XG4gICAgICAgIHByaXZhdGUgc2VydmljZTogc3RyaW5nO1xuICAgICAgICBwcml2YXRlIHBhcmFtTWFwOiBNYXA8c3RyaW5nLCBBcnJheTxzdHJpbmc+PjtcblxuICAgICAgICBjb25zdHJ1Y3Rvcihjb25uZWN0aW9uOiBDb25uZWN0aW9uLCB4bWxtYzogWG1sbWMpIHtcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdGlvbiA9IGNvbm5lY3Rpb247XG4gICAgICAgICAgICB0aGlzLnhtbG1jID0geG1sbWM7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2UgPSAnc2Vzc2lvbic7XG4gICAgICAgICAgICB0aGlzLnBhcmFtTWFwID0gbmV3IE1hcChbWydhbmFseXN0TG9nb2ZmJywgWydzZXNzaW9uSWQnLF1dLCBbJ2FuYWx5c3RMb2dvbicsIFsndXNlcklkJywgJ3Bhc3N3b3JkJyxdXSwgWydhbmFseXN0TG9nb25UcnVzdCcsIFsndXNlcklkJywgJ3NlY3JldEtleScsXV0sIFsnYmluZFNlc3Npb24nLCBbJ3Nlc3Npb25JZCcsXV0sIFsnY2hhbmdlUGFzc3dvcmQnLCBbJ29sZFBhc3N3b3JkJywgJ25ld1Bhc3N3b3JkJyxdXSwgWydjb252ZXJ0RGF0ZVRpbWVJblRleHQnLCBbJ2lucHV0VGV4dCcsXV0sIFsnZ2V0U2Vzc2lvbkluZm8nLCBbJ3Nlc3Npb25JZCcsXV0sIFsnZ2V0U2Vzc2lvbkluZm8yJywgWydzZXNzaW9uSWQnLF1dLCBbJ2hhc1JpZ2h0JywgWyd1c2VyUmlnaHQnLF1dLCBbJ2lzU2Vzc2lvblZhbGlkJywgWydzZXNzaW9uSWQnLF1dLCBbJ2xvY2tDdXN0b21lckFjY291bnQnLCBbJ3NlbGZTZXJ2aWNlSW5zdGFuY2UnLCAnY3VzdG9tZXJJZCcsICdwZXJtYW5lbnQnLCAnZHVyYXRpb24nLF1dLCBbJ3NlbGZTZXJ2aWNlTG9nb24nLCBbJ3NlbGZTZXJ2aWNlSW5zdGFuY2UnLCAnY3VzdG9tZXJJZCcsICdwYXNzd29yZCcsXV0sIFsnc2V0RGF0YWJhc2VSaWdodCcsIFsndGFibGVOYW1lJywgJ3JpZ2h0RmxhZycsICdyaWdodEFsbG93ZWQnLF1dLCBbJ3NldE91dHB1dFZhbGlkYXRpb24nLCBbJ3ZhbGlkYXRlUmVzdWx0TWVzc2FnZScsXV0sIFsnc2V0VXNlclJpZ2h0JywgWydyaWdodENsYXNzJywgJ3JpZ2h0RmxhZycsICdyaWdodEFsbG93ZWQnLF1dLCBbJ3NldFZhcmlhYmxlJywgWydzZXNzaW9uVmFyaWFibGUnLF1dLCBbJ3N3aXRjaEFuYWx5c3RDb250ZXh0JywgWydncm91cElkJywgJ2FuYWx5c3RJZCcsXV0sIFsndW5sb2NrQ3VzdG9tZXJBY2NvdW50JywgWydzZWxmU2VydmljZUluc3RhbmNlJywgJ2N1c3RvbWVySWQnLF1dLF0pO1xuICAgICAgICB9XG5cbiAgICAgICAgYW5hbHlzdExvZ29mZihvcHRpb25hbFBhcmFtcz86IHBhcmFtVHlwZXMuYW5hbHlzdExvZ29mZlBhcmFtcyk6IFByb21pc2U8WG1sbWNSZXNwb25zZT4ge1xuICAgICAgICAgICAgbGV0IHJlcXVlc3QgPSBuZXcgUmVxdWVzdCh0aGlzLnNlcnZpY2UsICdhbmFseXN0TG9nb2ZmJywgPFhtbG1jUGFyYW1zPihvcHRpb25hbFBhcmFtcyB8fCB7fSksIHRoaXMucGFyYW1NYXAuZ2V0KCdhbmFseXN0TG9nb2ZmJykgfHwgW10pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29ubmVjdGlvbi5zZW5kUmVxdWVzdChyZXF1ZXN0KVxuICAgICAgICB9XG5cbiAgICAgICAgYW5hbHlzdExvZ29uKHVzZXJJZDogc3RyaW5nLCBwYXNzd29yZDogc3RyaW5nLCBvcHRpb25hbFBhcmFtcz86IHBhcmFtVHlwZXMuYW5hbHlzdExvZ29uUGFyYW1zKTogUHJvbWlzZTxYbWxtY1Jlc3BvbnNlPiB7XG4gICAgICAgICAgICBsZXQgcmVxdWVzdCA9IG5ldyBSZXF1ZXN0KHRoaXMuc2VydmljZSwgJ2FuYWx5c3RMb2dvbicsIDxYbWxtY1BhcmFtcz5PYmplY3QuYXNzaWduKHt9LCB7XG4gICAgICAgICAgICAgICAgdXNlcklkLFxuICAgICAgICAgICAgICAgIHBhc3N3b3JkXG4gICAgICAgICAgICB9LCBvcHRpb25hbFBhcmFtcyB8fCB7fSksIHRoaXMucGFyYW1NYXAuZ2V0KCdhbmFseXN0TG9nb24nKSB8fCBbXSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uLnNlbmRSZXF1ZXN0KHJlcXVlc3QpXG4gICAgICAgIH1cblxuICAgICAgICBhbmFseXN0TG9nb25UcnVzdCh1c2VySWQ6IHN0cmluZywgc2VjcmV0S2V5OiBzdHJpbmcsIG9wdGlvbmFsUGFyYW1zPzogcGFyYW1UeXBlcy5hbmFseXN0TG9nb25UcnVzdFBhcmFtcyk6IFByb21pc2U8WG1sbWNSZXNwb25zZT4ge1xuICAgICAgICAgICAgbGV0IHJlcXVlc3QgPSBuZXcgUmVxdWVzdCh0aGlzLnNlcnZpY2UsICdhbmFseXN0TG9nb25UcnVzdCcsIDxYbWxtY1BhcmFtcz5PYmplY3QuYXNzaWduKHt9LCB7XG4gICAgICAgICAgICAgICAgdXNlcklkLFxuICAgICAgICAgICAgICAgIHNlY3JldEtleVxuICAgICAgICAgICAgfSwgb3B0aW9uYWxQYXJhbXMgfHwge30pLCB0aGlzLnBhcmFtTWFwLmdldCgnYW5hbHlzdExvZ29uVHJ1c3QnKSB8fCBbXSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uLnNlbmRSZXF1ZXN0KHJlcXVlc3QpXG4gICAgICAgIH1cblxuICAgICAgICBiaW5kU2Vzc2lvbihzZXNzaW9uSWQ6IHN0cmluZywgb3B0aW9uYWxQYXJhbXM/OiBwYXJhbVR5cGVzLmJpbmRTZXNzaW9uUGFyYW1zKTogUHJvbWlzZTxYbWxtY1Jlc3BvbnNlPiB7XG4gICAgICAgICAgICBsZXQgcmVxdWVzdCA9IG5ldyBSZXF1ZXN0KHRoaXMuc2VydmljZSwgJ2JpbmRTZXNzaW9uJywgPFhtbG1jUGFyYW1zPk9iamVjdC5hc3NpZ24oe30sIHtzZXNzaW9uSWR9LCBvcHRpb25hbFBhcmFtcyB8fCB7fSksIHRoaXMucGFyYW1NYXAuZ2V0KCdiaW5kU2Vzc2lvbicpIHx8IFtdKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb24uc2VuZFJlcXVlc3QocmVxdWVzdClcbiAgICAgICAgfVxuXG4gICAgICAgIGNoYW5nZVBhc3N3b3JkKG9sZFBhc3N3b3JkOiBzdHJpbmcsIG5ld1Bhc3N3b3JkOiBzdHJpbmcsIG9wdGlvbmFsUGFyYW1zPzogcGFyYW1UeXBlcy5jaGFuZ2VQYXNzd29yZFBhcmFtcyk6IFByb21pc2U8WG1sbWNSZXNwb25zZT4ge1xuICAgICAgICAgICAgbGV0IHJlcXVlc3QgPSBuZXcgUmVxdWVzdCh0aGlzLnNlcnZpY2UsICdjaGFuZ2VQYXNzd29yZCcsIDxYbWxtY1BhcmFtcz5PYmplY3QuYXNzaWduKHt9LCB7XG4gICAgICAgICAgICAgICAgb2xkUGFzc3dvcmQsXG4gICAgICAgICAgICAgICAgbmV3UGFzc3dvcmRcbiAgICAgICAgICAgIH0sIG9wdGlvbmFsUGFyYW1zIHx8IHt9KSwgdGhpcy5wYXJhbU1hcC5nZXQoJ2NoYW5nZVBhc3N3b3JkJykgfHwgW10pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29ubmVjdGlvbi5zZW5kUmVxdWVzdChyZXF1ZXN0KVxuICAgICAgICB9XG5cbiAgICAgICAgY2xvc2VMb2NhbFNlc3Npb24ob3B0aW9uYWxQYXJhbXM/OiBwYXJhbVR5cGVzLmNsb3NlTG9jYWxTZXNzaW9uUGFyYW1zKTogUHJvbWlzZTxYbWxtY1Jlc3BvbnNlPiB7XG4gICAgICAgICAgICBsZXQgcmVxdWVzdCA9IG5ldyBSZXF1ZXN0KHRoaXMuc2VydmljZSwgJ2Nsb3NlTG9jYWxTZXNzaW9uJywgPFhtbG1jUGFyYW1zPihvcHRpb25hbFBhcmFtcyB8fCB7fSksIHRoaXMucGFyYW1NYXAuZ2V0KCdjbG9zZUxvY2FsU2Vzc2lvbicpIHx8IFtdKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb24uc2VuZFJlcXVlc3QocmVxdWVzdClcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnZlcnREYXRlVGltZUluVGV4dChpbnB1dFRleHQ6IHN0cmluZywgb3B0aW9uYWxQYXJhbXM/OiBwYXJhbVR5cGVzLmNvbnZlcnREYXRlVGltZUluVGV4dFBhcmFtcyk6IFByb21pc2U8WG1sbWNSZXNwb25zZT4ge1xuICAgICAgICAgICAgbGV0IHJlcXVlc3QgPSBuZXcgUmVxdWVzdCh0aGlzLnNlcnZpY2UsICdjb252ZXJ0RGF0ZVRpbWVJblRleHQnLCA8WG1sbWNQYXJhbXM+T2JqZWN0LmFzc2lnbih7fSwge2lucHV0VGV4dH0sIG9wdGlvbmFsUGFyYW1zIHx8IHt9KSwgdGhpcy5wYXJhbU1hcC5nZXQoJ2NvbnZlcnREYXRlVGltZUluVGV4dCcpIHx8IFtdKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb24uc2VuZFJlcXVlc3QocmVxdWVzdClcbiAgICAgICAgfVxuXG4gICAgICAgIGNyZWF0ZUxvY2FsU2Vzc2lvbihvcHRpb25hbFBhcmFtcz86IHBhcmFtVHlwZXMuY3JlYXRlTG9jYWxTZXNzaW9uUGFyYW1zKTogUHJvbWlzZTxYbWxtY1Jlc3BvbnNlPiB7XG4gICAgICAgICAgICBsZXQgcmVxdWVzdCA9IG5ldyBSZXF1ZXN0KHRoaXMuc2VydmljZSwgJ2NyZWF0ZUxvY2FsU2Vzc2lvbicsIDxYbWxtY1BhcmFtcz4ob3B0aW9uYWxQYXJhbXMgfHwge30pLCB0aGlzLnBhcmFtTWFwLmdldCgnY3JlYXRlTG9jYWxTZXNzaW9uJykgfHwgW10pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29ubmVjdGlvbi5zZW5kUmVxdWVzdChyZXF1ZXN0KVxuICAgICAgICB9XG5cbiAgICAgICAgZ2V0U2Vzc2lvbkRESW5mbyhvcHRpb25hbFBhcmFtcz86IHBhcmFtVHlwZXMuZ2V0U2Vzc2lvbkRESW5mb1BhcmFtcyk6IFByb21pc2U8WG1sbWNSZXNwb25zZT4ge1xuICAgICAgICAgICAgbGV0IHJlcXVlc3QgPSBuZXcgUmVxdWVzdCh0aGlzLnNlcnZpY2UsICdnZXRTZXNzaW9uRERJbmZvJywgPFhtbG1jUGFyYW1zPihvcHRpb25hbFBhcmFtcyB8fCB7fSksIHRoaXMucGFyYW1NYXAuZ2V0KCdnZXRTZXNzaW9uRERJbmZvJykgfHwgW10pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29ubmVjdGlvbi5zZW5kUmVxdWVzdChyZXF1ZXN0KVxuICAgICAgICB9XG5cbiAgICAgICAgZ2V0U2Vzc2lvbkluZm8ob3B0aW9uYWxQYXJhbXM/OiBwYXJhbVR5cGVzLmdldFNlc3Npb25JbmZvUGFyYW1zKTogUHJvbWlzZTxYbWxtY1Jlc3BvbnNlPiB7XG4gICAgICAgICAgICBsZXQgcmVxdWVzdCA9IG5ldyBSZXF1ZXN0KHRoaXMuc2VydmljZSwgJ2dldFNlc3Npb25JbmZvJywgPFhtbG1jUGFyYW1zPihvcHRpb25hbFBhcmFtcyB8fCB7fSksIHRoaXMucGFyYW1NYXAuZ2V0KCdnZXRTZXNzaW9uSW5mbycpIHx8IFtdKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb24uc2VuZFJlcXVlc3QocmVxdWVzdClcbiAgICAgICAgfVxuXG4gICAgICAgIGdldFNlc3Npb25JbmZvMihvcHRpb25hbFBhcmFtcz86IHBhcmFtVHlwZXMuZ2V0U2Vzc2lvbkluZm8yUGFyYW1zKTogUHJvbWlzZTxYbWxtY1Jlc3BvbnNlPiB7XG4gICAgICAgICAgICBsZXQgcmVxdWVzdCA9IG5ldyBSZXF1ZXN0KHRoaXMuc2VydmljZSwgJ2dldFNlc3Npb25JbmZvMicsIDxYbWxtY1BhcmFtcz4ob3B0aW9uYWxQYXJhbXMgfHwge30pLCB0aGlzLnBhcmFtTWFwLmdldCgnZ2V0U2Vzc2lvbkluZm8yJykgfHwgW10pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29ubmVjdGlvbi5zZW5kUmVxdWVzdChyZXF1ZXN0KVxuICAgICAgICB9XG5cbiAgICAgICAgaGFzUmlnaHQodXNlclJpZ2h0OiBzdHJpbmcsIG9wdGlvbmFsUGFyYW1zPzogcGFyYW1UeXBlcy5oYXNSaWdodFBhcmFtcyk6IFByb21pc2U8WG1sbWNSZXNwb25zZT4ge1xuICAgICAgICAgICAgbGV0IHJlcXVlc3QgPSBuZXcgUmVxdWVzdCh0aGlzLnNlcnZpY2UsICdoYXNSaWdodCcsIDxYbWxtY1BhcmFtcz5PYmplY3QuYXNzaWduKHt9LCB7dXNlclJpZ2h0fSwgb3B0aW9uYWxQYXJhbXMgfHwge30pLCB0aGlzLnBhcmFtTWFwLmdldCgnaGFzUmlnaHQnKSB8fCBbXSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uLnNlbmRSZXF1ZXN0KHJlcXVlc3QpXG4gICAgICAgIH1cblxuICAgICAgICBpc1Nlc3Npb25WYWxpZChvcHRpb25hbFBhcmFtcz86IHBhcmFtVHlwZXMuaXNTZXNzaW9uVmFsaWRQYXJhbXMpOiBQcm9taXNlPFhtbG1jUmVzcG9uc2U+IHtcbiAgICAgICAgICAgIGxldCByZXF1ZXN0ID0gbmV3IFJlcXVlc3QodGhpcy5zZXJ2aWNlLCAnaXNTZXNzaW9uVmFsaWQnLCA8WG1sbWNQYXJhbXM+KG9wdGlvbmFsUGFyYW1zIHx8IHt9KSwgdGhpcy5wYXJhbU1hcC5nZXQoJ2lzU2Vzc2lvblZhbGlkJykgfHwgW10pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29ubmVjdGlvbi5zZW5kUmVxdWVzdChyZXF1ZXN0KVxuICAgICAgICB9XG5cbiAgICAgICAgbG9ja0N1c3RvbWVyQWNjb3VudChzZWxmU2VydmljZUluc3RhbmNlOiBzdHJpbmcsIGN1c3RvbWVySWQ6IHN0cmluZywgcGVybWFuZW50OiBib29sZWFuLCBvcHRpb25hbFBhcmFtcz86IHBhcmFtVHlwZXMubG9ja0N1c3RvbWVyQWNjb3VudFBhcmFtcyk6IFByb21pc2U8WG1sbWNSZXNwb25zZT4ge1xuICAgICAgICAgICAgbGV0IHJlcXVlc3QgPSBuZXcgUmVxdWVzdCh0aGlzLnNlcnZpY2UsICdsb2NrQ3VzdG9tZXJBY2NvdW50JywgPFhtbG1jUGFyYW1zPk9iamVjdC5hc3NpZ24oe30sIHtcbiAgICAgICAgICAgICAgICBzZWxmU2VydmljZUluc3RhbmNlLFxuICAgICAgICAgICAgICAgIGN1c3RvbWVySWQsXG4gICAgICAgICAgICAgICAgcGVybWFuZW50XG4gICAgICAgICAgICB9LCBvcHRpb25hbFBhcmFtcyB8fCB7fSksIHRoaXMucGFyYW1NYXAuZ2V0KCdsb2NrQ3VzdG9tZXJBY2NvdW50JykgfHwgW10pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29ubmVjdGlvbi5zZW5kUmVxdWVzdChyZXF1ZXN0KVxuICAgICAgICB9XG5cbiAgICAgICAgc2VsZlNlcnZpY2VMb2dvZmYob3B0aW9uYWxQYXJhbXM/OiBwYXJhbVR5cGVzLnNlbGZTZXJ2aWNlTG9nb2ZmUGFyYW1zKTogUHJvbWlzZTxYbWxtY1Jlc3BvbnNlPiB7XG4gICAgICAgICAgICBsZXQgcmVxdWVzdCA9IG5ldyBSZXF1ZXN0KHRoaXMuc2VydmljZSwgJ3NlbGZTZXJ2aWNlTG9nb2ZmJywgPFhtbG1jUGFyYW1zPihvcHRpb25hbFBhcmFtcyB8fCB7fSksIHRoaXMucGFyYW1NYXAuZ2V0KCdzZWxmU2VydmljZUxvZ29mZicpIHx8IFtdKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb24uc2VuZFJlcXVlc3QocmVxdWVzdClcbiAgICAgICAgfVxuXG4gICAgICAgIHNlbGZTZXJ2aWNlTG9nb24oc2VsZlNlcnZpY2VJbnN0YW5jZTogc3RyaW5nLCBjdXN0b21lcklkOiBzdHJpbmcsIHBhc3N3b3JkOiBzdHJpbmcsIG9wdGlvbmFsUGFyYW1zPzogcGFyYW1UeXBlcy5zZWxmU2VydmljZUxvZ29uUGFyYW1zKTogUHJvbWlzZTxYbWxtY1Jlc3BvbnNlPiB7XG4gICAgICAgICAgICBsZXQgcmVxdWVzdCA9IG5ldyBSZXF1ZXN0KHRoaXMuc2VydmljZSwgJ3NlbGZTZXJ2aWNlTG9nb24nLCA8WG1sbWNQYXJhbXM+T2JqZWN0LmFzc2lnbih7fSwge1xuICAgICAgICAgICAgICAgIHNlbGZTZXJ2aWNlSW5zdGFuY2UsXG4gICAgICAgICAgICAgICAgY3VzdG9tZXJJZCxcbiAgICAgICAgICAgICAgICBwYXNzd29yZFxuICAgICAgICAgICAgfSwgb3B0aW9uYWxQYXJhbXMgfHwge30pLCB0aGlzLnBhcmFtTWFwLmdldCgnc2VsZlNlcnZpY2VMb2dvbicpIHx8IFtdKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb24uc2VuZFJlcXVlc3QocmVxdWVzdClcbiAgICAgICAgfVxuXG4gICAgICAgIHNldERhdGFiYXNlUmlnaHQodGFibGVOYW1lOiBzdHJpbmcsIHJpZ2h0RmxhZzogbnVtYmVyLCByaWdodEFsbG93ZWQ6IGJvb2xlYW4sIG9wdGlvbmFsUGFyYW1zPzogcGFyYW1UeXBlcy5zZXREYXRhYmFzZVJpZ2h0UGFyYW1zKTogUHJvbWlzZTxYbWxtY1Jlc3BvbnNlPiB7XG4gICAgICAgICAgICBsZXQgcmVxdWVzdCA9IG5ldyBSZXF1ZXN0KHRoaXMuc2VydmljZSwgJ3NldERhdGFiYXNlUmlnaHQnLCA8WG1sbWNQYXJhbXM+T2JqZWN0LmFzc2lnbih7fSwge1xuICAgICAgICAgICAgICAgIHRhYmxlTmFtZSxcbiAgICAgICAgICAgICAgICByaWdodEZsYWcsXG4gICAgICAgICAgICAgICAgcmlnaHRBbGxvd2VkXG4gICAgICAgICAgICB9LCBvcHRpb25hbFBhcmFtcyB8fCB7fSksIHRoaXMucGFyYW1NYXAuZ2V0KCdzZXREYXRhYmFzZVJpZ2h0JykgfHwgW10pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29ubmVjdGlvbi5zZW5kUmVxdWVzdChyZXF1ZXN0KVxuICAgICAgICB9XG5cbiAgICAgICAgc2V0T3V0cHV0VmFsaWRhdGlvbih2YWxpZGF0ZVJlc3VsdE1lc3NhZ2U6IGJvb2xlYW4sIG9wdGlvbmFsUGFyYW1zPzogcGFyYW1UeXBlcy5zZXRPdXRwdXRWYWxpZGF0aW9uUGFyYW1zKTogUHJvbWlzZTxYbWxtY1Jlc3BvbnNlPiB7XG4gICAgICAgICAgICBsZXQgcmVxdWVzdCA9IG5ldyBSZXF1ZXN0KHRoaXMuc2VydmljZSwgJ3NldE91dHB1dFZhbGlkYXRpb24nLCA8WG1sbWNQYXJhbXM+T2JqZWN0LmFzc2lnbih7fSwge3ZhbGlkYXRlUmVzdWx0TWVzc2FnZX0sIG9wdGlvbmFsUGFyYW1zIHx8IHt9KSwgdGhpcy5wYXJhbU1hcC5nZXQoJ3NldE91dHB1dFZhbGlkYXRpb24nKSB8fCBbXSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uLnNlbmRSZXF1ZXN0KHJlcXVlc3QpXG4gICAgICAgIH1cblxuICAgICAgICBzZXRVc2VyUmlnaHQocmlnaHRDbGFzczogc3RyaW5nLCByaWdodEZsYWc6IG51bWJlciwgcmlnaHRBbGxvd2VkOiBib29sZWFuLCBvcHRpb25hbFBhcmFtcz86IHBhcmFtVHlwZXMuc2V0VXNlclJpZ2h0UGFyYW1zKTogUHJvbWlzZTxYbWxtY1Jlc3BvbnNlPiB7XG4gICAgICAgICAgICBsZXQgcmVxdWVzdCA9IG5ldyBSZXF1ZXN0KHRoaXMuc2VydmljZSwgJ3NldFVzZXJSaWdodCcsIDxYbWxtY1BhcmFtcz5PYmplY3QuYXNzaWduKHt9LCB7XG4gICAgICAgICAgICAgICAgcmlnaHRDbGFzcyxcbiAgICAgICAgICAgICAgICByaWdodEZsYWcsXG4gICAgICAgICAgICAgICAgcmlnaHRBbGxvd2VkXG4gICAgICAgICAgICB9LCBvcHRpb25hbFBhcmFtcyB8fCB7fSksIHRoaXMucGFyYW1NYXAuZ2V0KCdzZXRVc2VyUmlnaHQnKSB8fCBbXSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uLnNlbmRSZXF1ZXN0KHJlcXVlc3QpXG4gICAgICAgIH1cblxuICAgICAgICBzZXRWYXJpYWJsZShzZXNzaW9uVmFyaWFibGU6IE9iamVjdCwgb3B0aW9uYWxQYXJhbXM/OiBwYXJhbVR5cGVzLnNldFZhcmlhYmxlUGFyYW1zKTogUHJvbWlzZTxYbWxtY1Jlc3BvbnNlPiB7XG4gICAgICAgICAgICBsZXQgcmVxdWVzdCA9IG5ldyBSZXF1ZXN0KHRoaXMuc2VydmljZSwgJ3NldFZhcmlhYmxlJywgPFhtbG1jUGFyYW1zPk9iamVjdC5hc3NpZ24oe30sIHtzZXNzaW9uVmFyaWFibGV9LCBvcHRpb25hbFBhcmFtcyB8fCB7fSksIHRoaXMucGFyYW1NYXAuZ2V0KCdzZXRWYXJpYWJsZScpIHx8IFtdKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb24uc2VuZFJlcXVlc3QocmVxdWVzdClcbiAgICAgICAgfVxuXG4gICAgICAgIHN3aXRjaEFuYWx5c3RDb250ZXh0KGdyb3VwSWQ6IHN0cmluZywgb3B0aW9uYWxQYXJhbXM/OiBwYXJhbVR5cGVzLnN3aXRjaEFuYWx5c3RDb250ZXh0UGFyYW1zKTogUHJvbWlzZTxYbWxtY1Jlc3BvbnNlPiB7XG4gICAgICAgICAgICBsZXQgcmVxdWVzdCA9IG5ldyBSZXF1ZXN0KHRoaXMuc2VydmljZSwgJ3N3aXRjaEFuYWx5c3RDb250ZXh0JywgPFhtbG1jUGFyYW1zPk9iamVjdC5hc3NpZ24oe30sIHtncm91cElkfSwgb3B0aW9uYWxQYXJhbXMgfHwge30pLCB0aGlzLnBhcmFtTWFwLmdldCgnc3dpdGNoQW5hbHlzdENvbnRleHQnKSB8fCBbXSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uLnNlbmRSZXF1ZXN0KHJlcXVlc3QpXG4gICAgICAgIH1cblxuICAgICAgICB1bmxvY2tDdXN0b21lckFjY291bnQoc2VsZlNlcnZpY2VJbnN0YW5jZTogc3RyaW5nLCBjdXN0b21lcklkOiBzdHJpbmcsIG9wdGlvbmFsUGFyYW1zPzogcGFyYW1UeXBlcy51bmxvY2tDdXN0b21lckFjY291bnRQYXJhbXMpOiBQcm9taXNlPFhtbG1jUmVzcG9uc2U+IHtcbiAgICAgICAgICAgIGxldCByZXF1ZXN0ID0gbmV3IFJlcXVlc3QodGhpcy5zZXJ2aWNlLCAndW5sb2NrQ3VzdG9tZXJBY2NvdW50JywgPFhtbG1jUGFyYW1zPk9iamVjdC5hc3NpZ24oe30sIHtcbiAgICAgICAgICAgICAgICBzZWxmU2VydmljZUluc3RhbmNlLFxuICAgICAgICAgICAgICAgIGN1c3RvbWVySWRcbiAgICAgICAgICAgIH0sIG9wdGlvbmFsUGFyYW1zIHx8IHt9KSwgdGhpcy5wYXJhbU1hcC5nZXQoJ3VubG9ja0N1c3RvbWVyQWNjb3VudCcpIHx8IFtdKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb24uc2VuZFJlcXVlc3QocmVxdWVzdClcbiAgICAgICAgfVxuICAgIH1cblxuIl19