"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const Request_1 = require("../Request");
class System {
    constructor(connection, xmlmc) {
        this.connection = connection;
        this.xmlmc = xmlmc;
        this.service = 'system';
        this.paramMap = new Map([['getTimezoneDetails', ['timeZone',]], ['getTimezoneOffset', ['timeZone',]], ['multiClipAddItem', ['personalClipboard', 'name', 'itemData', 'multiClipGroup',]], ['multiClipDeleteItem', ['itemId',]], ['multiClipGetItemData', ['itemId',]], ['multiClipSetItemData', ['itemId', 'itemData',]], ['offsetEpochTime', ['epochTime', 'timeZone',]], ['sendProductFeedback', ['app', 'message', 'nps',]],]);
    }
    getFileTypeRestriction(optionalParams) {
        let request = new Request_1.Request(this.service, 'getFileTypeRestriction', (optionalParams || {}), this.paramMap.get('getFileTypeRestriction') || []);
        return this.connection.sendRequest(request);
    }
    getSystemInfo(optionalParams) {
        let request = new Request_1.Request(this.service, 'getSystemInfo', (optionalParams || {}), this.paramMap.get('getSystemInfo') || []);
        return this.connection.sendRequest(request);
    }
    getTimezoneDetails(optionalParams) {
        let request = new Request_1.Request(this.service, 'getTimezoneDetails', (optionalParams || {}), this.paramMap.get('getTimezoneDetails') || []);
        return this.connection.sendRequest(request);
    }
    getTimezoneList(optionalParams) {
        let request = new Request_1.Request(this.service, 'getTimezoneList', (optionalParams || {}), this.paramMap.get('getTimezoneList') || []);
        return this.connection.sendRequest(request);
    }
    getTimezoneOffset(optionalParams) {
        let request = new Request_1.Request(this.service, 'getTimezoneOffset', (optionalParams || {}), this.paramMap.get('getTimezoneOffset') || []);
        return this.connection.sendRequest(request);
    }
    multiClipAddItem(personalClipboard, name, itemData, optionalParams) {
        let request = new Request_1.Request(this.service, 'multiClipAddItem', Object.assign({}, {
            personalClipboard,
            name,
            itemData
        }, optionalParams || {}), this.paramMap.get('multiClipAddItem') || []);
        return this.connection.sendRequest(request);
    }
    multiClipDeleteItem(itemId, optionalParams) {
        let request = new Request_1.Request(this.service, 'multiClipDeleteItem', Object.assign({}, { itemId }, optionalParams || {}), this.paramMap.get('multiClipDeleteItem') || []);
        return this.connection.sendRequest(request);
    }
    multiClipGetItemData(itemId, optionalParams) {
        let request = new Request_1.Request(this.service, 'multiClipGetItemData', Object.assign({}, { itemId }, optionalParams || {}), this.paramMap.get('multiClipGetItemData') || []);
        return this.connection.sendRequest(request);
    }
    multiClipGetTree(optionalParams) {
        let request = new Request_1.Request(this.service, 'multiClipGetTree', (optionalParams || {}), this.paramMap.get('multiClipGetTree') || []);
        return this.connection.sendRequest(request);
    }
    multiClipSetItemData(itemId, itemData, optionalParams) {
        let request = new Request_1.Request(this.service, 'multiClipSetItemData', Object.assign({}, {
            itemId,
            itemData
        }, optionalParams || {}), this.paramMap.get('multiClipSetItemData') || []);
        return this.connection.sendRequest(request);
    }
    offsetEpochTime(epochTime, optionalParams) {
        let request = new Request_1.Request(this.service, 'offsetEpochTime', Object.assign({}, { epochTime }, optionalParams || {}), this.paramMap.get('offsetEpochTime') || []);
        return this.connection.sendRequest(request);
    }
    sendProductFeedback(message, optionalParams) {
        let request = new Request_1.Request(this.service, 'sendProductFeedback', Object.assign({}, { message }, optionalParams || {}), this.paramMap.get('sendProductFeedback') || []);
        return this.connection.sendRequest(request);
    }
}
exports.System = System;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU3lzdGVtLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL3NlcnZpY2VzL1N5c3RlbS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUtBLHdDQUFrQztBQUU5QjtJQU1JLFlBQVksVUFBc0IsRUFBRSxLQUFZO1FBQzVDLElBQUksQ0FBQyxVQUFVLEdBQUcsVUFBVSxDQUFDO1FBQzdCLElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO1FBQ25CLElBQUksQ0FBQyxPQUFPLEdBQUcsUUFBUSxDQUFDO1FBQ3hCLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxHQUFHLENBQUMsQ0FBQyxDQUFDLG9CQUFvQixFQUFFLENBQUMsVUFBVSxFQUFFLENBQUMsRUFBRSxDQUFDLG1CQUFtQixFQUFFLENBQUMsVUFBVSxFQUFFLENBQUMsRUFBRSxDQUFDLGtCQUFrQixFQUFFLENBQUMsbUJBQW1CLEVBQUUsTUFBTSxFQUFFLFVBQVUsRUFBRSxnQkFBZ0IsRUFBRSxDQUFDLEVBQUUsQ0FBQyxxQkFBcUIsRUFBRSxDQUFDLFFBQVEsRUFBRSxDQUFDLEVBQUUsQ0FBQyxzQkFBc0IsRUFBRSxDQUFDLFFBQVEsRUFBRSxDQUFDLEVBQUUsQ0FBQyxzQkFBc0IsRUFBRSxDQUFDLFFBQVEsRUFBRSxVQUFVLEVBQUUsQ0FBQyxFQUFFLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxXQUFXLEVBQUUsVUFBVSxFQUFFLENBQUMsRUFBRSxDQUFDLHFCQUFxQixFQUFFLENBQUMsS0FBSyxFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUN0YSxDQUFDO0lBRUQsc0JBQXNCLENBQUMsY0FBd0Q7UUFDM0UsSUFBSSxPQUFPLEdBQUcsSUFBSSxpQkFBTyxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsd0JBQXdCLEVBQWUsQ0FBQyxjQUFjLElBQUksRUFBRSxDQUFDLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsd0JBQXdCLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQztRQUMxSixNQUFNLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLENBQUE7SUFDL0MsQ0FBQztJQUVELGFBQWEsQ0FBQyxjQUErQztRQUN6RCxJQUFJLE9BQU8sR0FBRyxJQUFJLGlCQUFPLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxlQUFlLEVBQWUsQ0FBQyxjQUFjLElBQUksRUFBRSxDQUFDLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsZUFBZSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUM7UUFDeEksTUFBTSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsV0FBVyxDQUFDLE9BQU8sQ0FBQyxDQUFBO0lBQy9DLENBQUM7SUFFRCxrQkFBa0IsQ0FBQyxjQUFvRDtRQUNuRSxJQUFJLE9BQU8sR0FBRyxJQUFJLGlCQUFPLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxvQkFBb0IsRUFBZSxDQUFDLGNBQWMsSUFBSSxFQUFFLENBQUMsRUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxvQkFBb0IsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDO1FBQ2xKLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsQ0FBQTtJQUMvQyxDQUFDO0lBRUQsZUFBZSxDQUFDLGNBQWlEO1FBQzdELElBQUksT0FBTyxHQUFHLElBQUksaUJBQU8sQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLGlCQUFpQixFQUFlLENBQUMsY0FBYyxJQUFJLEVBQUUsQ0FBQyxFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLGlCQUFpQixDQUFDLElBQUksRUFBRSxDQUFDLENBQUM7UUFDNUksTUFBTSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsV0FBVyxDQUFDLE9BQU8sQ0FBQyxDQUFBO0lBQy9DLENBQUM7SUFFRCxpQkFBaUIsQ0FBQyxjQUFtRDtRQUNqRSxJQUFJLE9BQU8sR0FBRyxJQUFJLGlCQUFPLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxtQkFBbUIsRUFBZSxDQUFDLGNBQWMsSUFBSSxFQUFFLENBQUMsRUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxtQkFBbUIsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDO1FBQ2hKLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsQ0FBQTtJQUMvQyxDQUFDO0lBRUQsZ0JBQWdCLENBQUMsaUJBQTBCLEVBQUUsSUFBWSxFQUFFLFFBQWdCLEVBQUUsY0FBa0Q7UUFDM0gsSUFBSSxPQUFPLEdBQUcsSUFBSSxpQkFBTyxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsa0JBQWtCLEVBQWUsTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUU7WUFDdkYsaUJBQWlCO1lBQ2pCLElBQUk7WUFDSixRQUFRO1NBQ1gsRUFBRSxjQUFjLElBQUksRUFBRSxDQUFDLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsa0JBQWtCLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQztRQUN2RSxNQUFNLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLENBQUE7SUFDL0MsQ0FBQztJQUVELG1CQUFtQixDQUFDLE1BQWMsRUFBRSxjQUFxRDtRQUNyRixJQUFJLE9BQU8sR0FBRyxJQUFJLGlCQUFPLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxxQkFBcUIsRUFBZSxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxFQUFDLE1BQU0sRUFBQyxFQUFFLGNBQWMsSUFBSSxFQUFFLENBQUMsRUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxxQkFBcUIsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDO1FBQy9LLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsQ0FBQTtJQUMvQyxDQUFDO0lBRUQsb0JBQW9CLENBQUMsTUFBYyxFQUFFLGNBQXNEO1FBQ3ZGLElBQUksT0FBTyxHQUFHLElBQUksaUJBQU8sQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLHNCQUFzQixFQUFlLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLEVBQUMsTUFBTSxFQUFDLEVBQUUsY0FBYyxJQUFJLEVBQUUsQ0FBQyxFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLHNCQUFzQixDQUFDLElBQUksRUFBRSxDQUFDLENBQUM7UUFDakwsTUFBTSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsV0FBVyxDQUFDLE9BQU8sQ0FBQyxDQUFBO0lBQy9DLENBQUM7SUFFRCxnQkFBZ0IsQ0FBQyxjQUFrRDtRQUMvRCxJQUFJLE9BQU8sR0FBRyxJQUFJLGlCQUFPLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxrQkFBa0IsRUFBZSxDQUFDLGNBQWMsSUFBSSxFQUFFLENBQUMsRUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDO1FBQzlJLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsQ0FBQTtJQUMvQyxDQUFDO0lBRUQsb0JBQW9CLENBQUMsTUFBYyxFQUFFLFFBQWdCLEVBQUUsY0FBc0Q7UUFDekcsSUFBSSxPQUFPLEdBQUcsSUFBSSxpQkFBTyxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsc0JBQXNCLEVBQWUsTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUU7WUFDM0YsTUFBTTtZQUNOLFFBQVE7U0FDWCxFQUFFLGNBQWMsSUFBSSxFQUFFLENBQUMsRUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxzQkFBc0IsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDO1FBQzNFLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsQ0FBQTtJQUMvQyxDQUFDO0lBRUQsZUFBZSxDQUFDLFNBQWlCLEVBQUUsY0FBaUQ7UUFDaEYsSUFBSSxPQUFPLEdBQUcsSUFBSSxpQkFBTyxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsaUJBQWlCLEVBQWUsTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsRUFBQyxTQUFTLEVBQUMsRUFBRSxjQUFjLElBQUksRUFBRSxDQUFDLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsaUJBQWlCLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQztRQUMxSyxNQUFNLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLENBQUE7SUFDL0MsQ0FBQztJQUVELG1CQUFtQixDQUFDLE9BQWUsRUFBRSxjQUFxRDtRQUN0RixJQUFJLE9BQU8sR0FBRyxJQUFJLGlCQUFPLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxxQkFBcUIsRUFBZSxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxFQUFDLE9BQU8sRUFBQyxFQUFFLGNBQWMsSUFBSSxFQUFFLENBQUMsRUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxxQkFBcUIsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDO1FBQ2hMLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsQ0FBQTtJQUMvQyxDQUFDO0NBQ0o7QUEvRUQsd0JBK0VDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgcGFyYW1UeXBlcyBmcm9tICcuLi90eXBlcy9TeXN0ZW1UeXBlcydcbmltcG9ydCB7QXhpb3NFcnJvciwgQXhpb3NSZXNwb25zZX0gZnJvbSBcImF4aW9zXCI7XG5pbXBvcnQge1htbG1jUGFyYW1zfSBmcm9tIFwiLi4vdHlwZXMvWG1sbWNUeXBlc1wiO1xuaW1wb3J0IHtDb25uZWN0aW9ufSBmcm9tICcuLi9Db25uZWN0aW9uJ1xuaW1wb3J0IFhtbG1jIGZyb20gJy4uL1htbE1ldGhvZENhbGwnXG5pbXBvcnQge1JlcXVlc3R9IGZyb20gJy4uL1JlcXVlc3QnXG5cbiAgICBleHBvcnQgY2xhc3MgU3lzdGVtIHtcbiAgICAgICAgcHJpdmF0ZSBjb25uZWN0aW9uOiBDb25uZWN0aW9uO1xuICAgICAgICBwcml2YXRlIHhtbG1jOiBYbWxtYztcbiAgICAgICAgcHJpdmF0ZSBzZXJ2aWNlOiBzdHJpbmc7XG4gICAgICAgIHByaXZhdGUgcGFyYW1NYXA6IE1hcDxzdHJpbmcsIEFycmF5PHN0cmluZz4+O1xuXG4gICAgICAgIGNvbnN0cnVjdG9yKGNvbm5lY3Rpb246IENvbm5lY3Rpb24sIHhtbG1jOiBYbWxtYykge1xuICAgICAgICAgICAgdGhpcy5jb25uZWN0aW9uID0gY29ubmVjdGlvbjtcbiAgICAgICAgICAgIHRoaXMueG1sbWMgPSB4bWxtYztcbiAgICAgICAgICAgIHRoaXMuc2VydmljZSA9ICdzeXN0ZW0nO1xuICAgICAgICAgICAgdGhpcy5wYXJhbU1hcCA9IG5ldyBNYXAoW1snZ2V0VGltZXpvbmVEZXRhaWxzJywgWyd0aW1lWm9uZScsXV0sIFsnZ2V0VGltZXpvbmVPZmZzZXQnLCBbJ3RpbWVab25lJyxdXSwgWydtdWx0aUNsaXBBZGRJdGVtJywgWydwZXJzb25hbENsaXBib2FyZCcsICduYW1lJywgJ2l0ZW1EYXRhJywgJ211bHRpQ2xpcEdyb3VwJyxdXSwgWydtdWx0aUNsaXBEZWxldGVJdGVtJywgWydpdGVtSWQnLF1dLCBbJ211bHRpQ2xpcEdldEl0ZW1EYXRhJywgWydpdGVtSWQnLF1dLCBbJ211bHRpQ2xpcFNldEl0ZW1EYXRhJywgWydpdGVtSWQnLCAnaXRlbURhdGEnLF1dLCBbJ29mZnNldEVwb2NoVGltZScsIFsnZXBvY2hUaW1lJywgJ3RpbWVab25lJyxdXSwgWydzZW5kUHJvZHVjdEZlZWRiYWNrJywgWydhcHAnLCAnbWVzc2FnZScsICducHMnLF1dLF0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZ2V0RmlsZVR5cGVSZXN0cmljdGlvbihvcHRpb25hbFBhcmFtcz86IHBhcmFtVHlwZXMuZ2V0RmlsZVR5cGVSZXN0cmljdGlvblBhcmFtcyk6IFByb21pc2U8QXhpb3NSZXNwb25zZSB8IEF4aW9zRXJyb3I+IHtcbiAgICAgICAgICAgIGxldCByZXF1ZXN0ID0gbmV3IFJlcXVlc3QodGhpcy5zZXJ2aWNlLCAnZ2V0RmlsZVR5cGVSZXN0cmljdGlvbicsIDxYbWxtY1BhcmFtcz4ob3B0aW9uYWxQYXJhbXMgfHwge30pLCB0aGlzLnBhcmFtTWFwLmdldCgnZ2V0RmlsZVR5cGVSZXN0cmljdGlvbicpIHx8IFtdKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb24uc2VuZFJlcXVlc3QocmVxdWVzdClcbiAgICAgICAgfVxuXG4gICAgICAgIGdldFN5c3RlbUluZm8ob3B0aW9uYWxQYXJhbXM/OiBwYXJhbVR5cGVzLmdldFN5c3RlbUluZm9QYXJhbXMpOiBQcm9taXNlPEF4aW9zUmVzcG9uc2UgfCBBeGlvc0Vycm9yPiB7XG4gICAgICAgICAgICBsZXQgcmVxdWVzdCA9IG5ldyBSZXF1ZXN0KHRoaXMuc2VydmljZSwgJ2dldFN5c3RlbUluZm8nLCA8WG1sbWNQYXJhbXM+KG9wdGlvbmFsUGFyYW1zIHx8IHt9KSwgdGhpcy5wYXJhbU1hcC5nZXQoJ2dldFN5c3RlbUluZm8nKSB8fCBbXSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uLnNlbmRSZXF1ZXN0KHJlcXVlc3QpXG4gICAgICAgIH1cblxuICAgICAgICBnZXRUaW1lem9uZURldGFpbHMob3B0aW9uYWxQYXJhbXM/OiBwYXJhbVR5cGVzLmdldFRpbWV6b25lRGV0YWlsc1BhcmFtcyk6IFByb21pc2U8QXhpb3NSZXNwb25zZSB8IEF4aW9zRXJyb3I+IHtcbiAgICAgICAgICAgIGxldCByZXF1ZXN0ID0gbmV3IFJlcXVlc3QodGhpcy5zZXJ2aWNlLCAnZ2V0VGltZXpvbmVEZXRhaWxzJywgPFhtbG1jUGFyYW1zPihvcHRpb25hbFBhcmFtcyB8fCB7fSksIHRoaXMucGFyYW1NYXAuZ2V0KCdnZXRUaW1lem9uZURldGFpbHMnKSB8fCBbXSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uLnNlbmRSZXF1ZXN0KHJlcXVlc3QpXG4gICAgICAgIH1cblxuICAgICAgICBnZXRUaW1lem9uZUxpc3Qob3B0aW9uYWxQYXJhbXM/OiBwYXJhbVR5cGVzLmdldFRpbWV6b25lTGlzdFBhcmFtcyk6IFByb21pc2U8QXhpb3NSZXNwb25zZSB8IEF4aW9zRXJyb3I+IHtcbiAgICAgICAgICAgIGxldCByZXF1ZXN0ID0gbmV3IFJlcXVlc3QodGhpcy5zZXJ2aWNlLCAnZ2V0VGltZXpvbmVMaXN0JywgPFhtbG1jUGFyYW1zPihvcHRpb25hbFBhcmFtcyB8fCB7fSksIHRoaXMucGFyYW1NYXAuZ2V0KCdnZXRUaW1lem9uZUxpc3QnKSB8fCBbXSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uLnNlbmRSZXF1ZXN0KHJlcXVlc3QpXG4gICAgICAgIH1cblxuICAgICAgICBnZXRUaW1lem9uZU9mZnNldChvcHRpb25hbFBhcmFtcz86IHBhcmFtVHlwZXMuZ2V0VGltZXpvbmVPZmZzZXRQYXJhbXMpOiBQcm9taXNlPEF4aW9zUmVzcG9uc2UgfCBBeGlvc0Vycm9yPiB7XG4gICAgICAgICAgICBsZXQgcmVxdWVzdCA9IG5ldyBSZXF1ZXN0KHRoaXMuc2VydmljZSwgJ2dldFRpbWV6b25lT2Zmc2V0JywgPFhtbG1jUGFyYW1zPihvcHRpb25hbFBhcmFtcyB8fCB7fSksIHRoaXMucGFyYW1NYXAuZ2V0KCdnZXRUaW1lem9uZU9mZnNldCcpIHx8IFtdKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb24uc2VuZFJlcXVlc3QocmVxdWVzdClcbiAgICAgICAgfVxuXG4gICAgICAgIG11bHRpQ2xpcEFkZEl0ZW0ocGVyc29uYWxDbGlwYm9hcmQ6IGJvb2xlYW4sIG5hbWU6IHN0cmluZywgaXRlbURhdGE6IHN0cmluZywgb3B0aW9uYWxQYXJhbXM/OiBwYXJhbVR5cGVzLm11bHRpQ2xpcEFkZEl0ZW1QYXJhbXMpOiBQcm9taXNlPEF4aW9zUmVzcG9uc2UgfCBBeGlvc0Vycm9yPiB7XG4gICAgICAgICAgICBsZXQgcmVxdWVzdCA9IG5ldyBSZXF1ZXN0KHRoaXMuc2VydmljZSwgJ211bHRpQ2xpcEFkZEl0ZW0nLCA8WG1sbWNQYXJhbXM+T2JqZWN0LmFzc2lnbih7fSwge1xuICAgICAgICAgICAgICAgIHBlcnNvbmFsQ2xpcGJvYXJkLFxuICAgICAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICAgICAgaXRlbURhdGFcbiAgICAgICAgICAgIH0sIG9wdGlvbmFsUGFyYW1zIHx8IHt9KSwgdGhpcy5wYXJhbU1hcC5nZXQoJ211bHRpQ2xpcEFkZEl0ZW0nKSB8fCBbXSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uLnNlbmRSZXF1ZXN0KHJlcXVlc3QpXG4gICAgICAgIH1cblxuICAgICAgICBtdWx0aUNsaXBEZWxldGVJdGVtKGl0ZW1JZDogT2JqZWN0LCBvcHRpb25hbFBhcmFtcz86IHBhcmFtVHlwZXMubXVsdGlDbGlwRGVsZXRlSXRlbVBhcmFtcyk6IFByb21pc2U8QXhpb3NSZXNwb25zZSB8IEF4aW9zRXJyb3I+IHtcbiAgICAgICAgICAgIGxldCByZXF1ZXN0ID0gbmV3IFJlcXVlc3QodGhpcy5zZXJ2aWNlLCAnbXVsdGlDbGlwRGVsZXRlSXRlbScsIDxYbWxtY1BhcmFtcz5PYmplY3QuYXNzaWduKHt9LCB7aXRlbUlkfSwgb3B0aW9uYWxQYXJhbXMgfHwge30pLCB0aGlzLnBhcmFtTWFwLmdldCgnbXVsdGlDbGlwRGVsZXRlSXRlbScpIHx8IFtdKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb24uc2VuZFJlcXVlc3QocmVxdWVzdClcbiAgICAgICAgfVxuXG4gICAgICAgIG11bHRpQ2xpcEdldEl0ZW1EYXRhKGl0ZW1JZDogbnVtYmVyLCBvcHRpb25hbFBhcmFtcz86IHBhcmFtVHlwZXMubXVsdGlDbGlwR2V0SXRlbURhdGFQYXJhbXMpOiBQcm9taXNlPEF4aW9zUmVzcG9uc2UgfCBBeGlvc0Vycm9yPiB7XG4gICAgICAgICAgICBsZXQgcmVxdWVzdCA9IG5ldyBSZXF1ZXN0KHRoaXMuc2VydmljZSwgJ211bHRpQ2xpcEdldEl0ZW1EYXRhJywgPFhtbG1jUGFyYW1zPk9iamVjdC5hc3NpZ24oe30sIHtpdGVtSWR9LCBvcHRpb25hbFBhcmFtcyB8fCB7fSksIHRoaXMucGFyYW1NYXAuZ2V0KCdtdWx0aUNsaXBHZXRJdGVtRGF0YScpIHx8IFtdKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb24uc2VuZFJlcXVlc3QocmVxdWVzdClcbiAgICAgICAgfVxuXG4gICAgICAgIG11bHRpQ2xpcEdldFRyZWUob3B0aW9uYWxQYXJhbXM/OiBwYXJhbVR5cGVzLm11bHRpQ2xpcEdldFRyZWVQYXJhbXMpOiBQcm9taXNlPEF4aW9zUmVzcG9uc2UgfCBBeGlvc0Vycm9yPiB7XG4gICAgICAgICAgICBsZXQgcmVxdWVzdCA9IG5ldyBSZXF1ZXN0KHRoaXMuc2VydmljZSwgJ211bHRpQ2xpcEdldFRyZWUnLCA8WG1sbWNQYXJhbXM+KG9wdGlvbmFsUGFyYW1zIHx8IHt9KSwgdGhpcy5wYXJhbU1hcC5nZXQoJ211bHRpQ2xpcEdldFRyZWUnKSB8fCBbXSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uLnNlbmRSZXF1ZXN0KHJlcXVlc3QpXG4gICAgICAgIH1cblxuICAgICAgICBtdWx0aUNsaXBTZXRJdGVtRGF0YShpdGVtSWQ6IE9iamVjdCwgaXRlbURhdGE6IHN0cmluZywgb3B0aW9uYWxQYXJhbXM/OiBwYXJhbVR5cGVzLm11bHRpQ2xpcFNldEl0ZW1EYXRhUGFyYW1zKTogUHJvbWlzZTxBeGlvc1Jlc3BvbnNlIHwgQXhpb3NFcnJvcj4ge1xuICAgICAgICAgICAgbGV0IHJlcXVlc3QgPSBuZXcgUmVxdWVzdCh0aGlzLnNlcnZpY2UsICdtdWx0aUNsaXBTZXRJdGVtRGF0YScsIDxYbWxtY1BhcmFtcz5PYmplY3QuYXNzaWduKHt9LCB7XG4gICAgICAgICAgICAgICAgaXRlbUlkLFxuICAgICAgICAgICAgICAgIGl0ZW1EYXRhXG4gICAgICAgICAgICB9LCBvcHRpb25hbFBhcmFtcyB8fCB7fSksIHRoaXMucGFyYW1NYXAuZ2V0KCdtdWx0aUNsaXBTZXRJdGVtRGF0YScpIHx8IFtdKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb24uc2VuZFJlcXVlc3QocmVxdWVzdClcbiAgICAgICAgfVxuXG4gICAgICAgIG9mZnNldEVwb2NoVGltZShlcG9jaFRpbWU6IG51bWJlciwgb3B0aW9uYWxQYXJhbXM/OiBwYXJhbVR5cGVzLm9mZnNldEVwb2NoVGltZVBhcmFtcyk6IFByb21pc2U8QXhpb3NSZXNwb25zZSB8IEF4aW9zRXJyb3I+IHtcbiAgICAgICAgICAgIGxldCByZXF1ZXN0ID0gbmV3IFJlcXVlc3QodGhpcy5zZXJ2aWNlLCAnb2Zmc2V0RXBvY2hUaW1lJywgPFhtbG1jUGFyYW1zPk9iamVjdC5hc3NpZ24oe30sIHtlcG9jaFRpbWV9LCBvcHRpb25hbFBhcmFtcyB8fCB7fSksIHRoaXMucGFyYW1NYXAuZ2V0KCdvZmZzZXRFcG9jaFRpbWUnKSB8fCBbXSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uLnNlbmRSZXF1ZXN0KHJlcXVlc3QpXG4gICAgICAgIH1cblxuICAgICAgICBzZW5kUHJvZHVjdEZlZWRiYWNrKG1lc3NhZ2U6IHN0cmluZywgb3B0aW9uYWxQYXJhbXM/OiBwYXJhbVR5cGVzLnNlbmRQcm9kdWN0RmVlZGJhY2tQYXJhbXMpOiBQcm9taXNlPEF4aW9zUmVzcG9uc2UgfCBBeGlvc0Vycm9yPiB7XG4gICAgICAgICAgICBsZXQgcmVxdWVzdCA9IG5ldyBSZXF1ZXN0KHRoaXMuc2VydmljZSwgJ3NlbmRQcm9kdWN0RmVlZGJhY2snLCA8WG1sbWNQYXJhbXM+T2JqZWN0LmFzc2lnbih7fSwge21lc3NhZ2V9LCBvcHRpb25hbFBhcmFtcyB8fCB7fSksIHRoaXMucGFyYW1NYXAuZ2V0KCdzZW5kUHJvZHVjdEZlZWRiYWNrJykgfHwgW10pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29ubmVjdGlvbi5zZW5kUmVxdWVzdChyZXF1ZXN0KVxuICAgICAgICB9XG4gICAgfVxuXG4iXX0=