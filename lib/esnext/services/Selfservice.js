"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const Request_1 = require("../Request");
class Selfservice {
    constructor(connection, xmlmc) {
        this.connection = connection;
        this.xmlmc = xmlmc;
        this.service = 'selfservice';
        this.paramMap = new Map([['changePassword', ['oldPassword', 'newPassword',]], ['customerCancelCall', ['callRef', 'description', 'extraUpdateDbValues',]], ['customerGetCallDetails', ['callref', 'formatValues', 'returnMeta', 'returnRawValues',]], ['customerGetCallList', ['returnOpen', 'returnClosed', 'returnCancelled', 'formatValues', 'returnMeta', 'returnRawValues',]], ['customerGetProfileCodeTree', ['node', 'filter', 'returnFullTree', 'returnInactiveCodes',]], ['customerGetResolutionCodeTree', ['node', 'filter', 'returnFullTree', 'returnInactiveCodes',]], ['customerLogNewCall', ['logIncoming', 'callClass', 'slaName', 'assetId', 'costCenter', 'probCode', 'site', 'condition', 'groupId', 'analystId', 'timeSpent', 'updateMessage', 'updateCode', 'updateSource', 'fileAttachment', 'additionalCallValues',]], ['customerUpdateCall', ['callref', 'timeSpent', 'description', 'updateSource', 'updateCode', 'fileAttachment', 'extraUpdateDbValues',]], ['customerUpdateCallValues', ['callref', 'actionVerb', 'updateMessage', 'additionalCallValues',]], ['requestPasswordReset', ['selfServiceId', 'customerId', 'loginId',]], ['verifyPasswordResetToken', ['selfServiceId', 'customerId', 'loginId', 'token', 'password',]],]);
    }
    changePassword(oldPassword, newPassword, optionalParams) {
        let request = new Request_1.Request(this.service, 'changePassword', Object.assign({}, {
            oldPassword,
            newPassword
        }, optionalParams || {}), this.paramMap.get('changePassword') || []);
        return this.connection.sendRequest(request);
    }
    customerCancelCall(callRef, description, optionalParams) {
        let request = new Request_1.Request(this.service, 'customerCancelCall', Object.assign({}, {
            callRef,
            description
        }, optionalParams || {}), this.paramMap.get('customerCancelCall') || []);
        return this.connection.sendRequest(request);
    }
    customerGetCallDetails(callref, optionalParams) {
        let request = new Request_1.Request(this.service, 'customerGetCallDetails', Object.assign({}, { callref }, optionalParams || {}), this.paramMap.get('customerGetCallDetails') || []);
        return this.connection.sendRequest(request);
    }
    customerGetCallList(optionalParams) {
        let request = new Request_1.Request(this.service, 'customerGetCallList', (optionalParams || {}), this.paramMap.get('customerGetCallList') || []);
        return this.connection.sendRequest(request);
    }
    customerGetProfileCodeTree(optionalParams) {
        let request = new Request_1.Request(this.service, 'customerGetProfileCodeTree', (optionalParams || {}), this.paramMap.get('customerGetProfileCodeTree') || []);
        return this.connection.sendRequest(request);
    }
    customerGetResolutionCodeTree(optionalParams) {
        let request = new Request_1.Request(this.service, 'customerGetResolutionCodeTree', (optionalParams || {}), this.paramMap.get('customerGetResolutionCodeTree') || []);
        return this.connection.sendRequest(request);
    }
    customerLogNewCall(callClass, groupId, optionalParams) {
        let request = new Request_1.Request(this.service, 'customerLogNewCall', Object.assign({}, {
            callClass,
            groupId
        }, optionalParams || {}), this.paramMap.get('customerLogNewCall') || []);
        return this.connection.sendRequest(request);
    }
    customerUpdateCall(callref, timeSpent, description, optionalParams) {
        let request = new Request_1.Request(this.service, 'customerUpdateCall', Object.assign({}, {
            callref,
            timeSpent,
            description
        }, optionalParams || {}), this.paramMap.get('customerUpdateCall') || []);
        return this.connection.sendRequest(request);
    }
    customerUpdateCallValues(callref, additionalCallValues, optionalParams) {
        let request = new Request_1.Request(this.service, 'customerUpdateCallValues', Object.assign({}, {
            callref,
            additionalCallValues
        }, optionalParams || {}), this.paramMap.get('customerUpdateCallValues') || []);
        return this.connection.sendRequest(request);
    }
    requestPasswordReset(selfServiceId, optionalParams) {
        let request = new Request_1.Request(this.service, 'requestPasswordReset', Object.assign({}, { selfServiceId }, optionalParams || {}), this.paramMap.get('requestPasswordReset') || []);
        return this.connection.sendRequest(request);
    }
    verifyPasswordResetToken(selfServiceId, token, password, optionalParams) {
        let request = new Request_1.Request(this.service, 'verifyPasswordResetToken', Object.assign({}, {
            selfServiceId,
            token,
            password
        }, optionalParams || {}), this.paramMap.get('verifyPasswordResetToken') || []);
        return this.connection.sendRequest(request);
    }
}
exports.Selfservice = Selfservice;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU2VsZnNlcnZpY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvc2VydmljZXMvU2VsZnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFLQSx3Q0FBa0M7QUFFOUI7SUFNSSxZQUFZLFVBQXNCLEVBQUUsS0FBWTtRQUM1QyxJQUFJLENBQUMsVUFBVSxHQUFHLFVBQVUsQ0FBQztRQUM3QixJQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztRQUNuQixJQUFJLENBQUMsT0FBTyxHQUFHLGFBQWEsQ0FBQztRQUM3QixJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksR0FBRyxDQUFDLENBQUMsQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDLGFBQWEsRUFBRSxhQUFhLEVBQUUsQ0FBQyxFQUFFLENBQUMsb0JBQW9CLEVBQUUsQ0FBQyxTQUFTLEVBQUUsYUFBYSxFQUFFLHFCQUFxQixFQUFFLENBQUMsRUFBRSxDQUFDLHdCQUF3QixFQUFFLENBQUMsU0FBUyxFQUFFLGNBQWMsRUFBRSxZQUFZLEVBQUUsaUJBQWlCLEVBQUUsQ0FBQyxFQUFFLENBQUMscUJBQXFCLEVBQUUsQ0FBQyxZQUFZLEVBQUUsY0FBYyxFQUFFLGlCQUFpQixFQUFFLGNBQWMsRUFBRSxZQUFZLEVBQUUsaUJBQWlCLEVBQUUsQ0FBQyxFQUFFLENBQUMsNEJBQTRCLEVBQUUsQ0FBQyxNQUFNLEVBQUUsUUFBUSxFQUFFLGdCQUFnQixFQUFFLHFCQUFxQixFQUFFLENBQUMsRUFBRSxDQUFDLCtCQUErQixFQUFFLENBQUMsTUFBTSxFQUFFLFFBQVEsRUFBRSxnQkFBZ0IsRUFBRSxxQkFBcUIsRUFBRSxDQUFDLEVBQUUsQ0FBQyxvQkFBb0IsRUFBRSxDQUFDLGFBQWEsRUFBRSxXQUFXLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxZQUFZLEVBQUUsVUFBVSxFQUFFLE1BQU0sRUFBRSxXQUFXLEVBQUUsU0FBUyxFQUFFLFdBQVcsRUFBRSxXQUFXLEVBQUUsZUFB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QkFBMEIsRUFBZSxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRTtZQUMvRixhQUFhO1lBQ2IsS0FBSztZQUNMLFFBQVE7U0FDWCxFQUFFLGNBQWMsSUFBSSxFQUFFLENBQUMsRUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQywwQkFBMEIsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDO1FBQy9FLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsQ0FBQTtJQUMvQyxDQUFDO0NBQ0o7QUF2RkQsa0NBdUZDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgcGFyYW1UeXBlcyBmcm9tICcuLi90eXBlcy9TZWxmc2VydmljZVR5cGVzJ1xuaW1wb3J0IHtBeGlvc0Vycm9yLCBBeGlvc1Jlc3BvbnNlfSBmcm9tIFwiYXhpb3NcIjtcbmltcG9ydCB7WG1sbWNQYXJhbXN9IGZyb20gXCIuLi90eXBlcy9YbWxtY1R5cGVzXCI7XG5pbXBvcnQge0Nvbm5lY3Rpb24sIFhtbG1jUmVzcG9uc2V9IGZyb20gJy4uL0Nvbm5lY3Rpb24nXG5pbXBvcnQgWG1sbWMgZnJvbSAnLi4vWG1sTWV0aG9kQ2FsbCdcbmltcG9ydCB7UmVxdWVzdH0gZnJvbSAnLi4vUmVxdWVzdCdcblxuICAgIGV4cG9ydCBjbGFzcyBTZWxmc2VydmljZSB7XG4gICAgICAgIHByaXZhdGUgY29ubmVjdGlvbjogQ29ubmVjdGlvbjtcbiAgICAgICAgcHJpdmF0ZSB4bWxtYzogWG1sbWM7XG4gICAgICAgIHByaXZhdGUgc2VydmljZTogc3RyaW5nO1xuICAgICAgICBwcml2YXRlIHBhcmFtTWFwOiBNYXA8c3RyaW5nLCBBcnJheTxzdHJpbmc+PjtcblxuICAgICAgICBjb25zdHJ1Y3Rvcihjb25uZWN0aW9uOiBDb25uZWN0aW9uLCB4bWxtYzogWG1sbWMpIHtcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdGlvbiA9IGNvbm5lY3Rpb247XG4gICAgICAgICAgICB0aGlzLnhtbG1jID0geG1sbWM7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2UgPSAnc2VsZnNlcnZpY2UnO1xuICAgICAgICAgICAgdGhpcy5wYXJhbU1hcCA9IG5ldyBNYXAoW1snY2hhbmdlUGFzc3dvcmQnLCBbJ29sZFBhc3N3b3JkJywgJ25ld1Bhc3N3b3JkJyxdXSwgWydjdXN0b21lckNhbmNlbENhbGwnLCBbJ2NhbGxSZWYnLCAnZGVzY3JpcHRpb24nLCAnZXh0cmFVcGRhdGVEYlZhbHVlcycsXV0sIFsnY3VzdG9tZXJHZXRDYWxsRGV0YWlscycsIFsnY2FsbHJlZicsICdmb3JtYXRWYWx1ZXMnLCAncmV0dXJuTWV0YScsICdyZXR1cm5SYXdWYWx1ZXMnLF1dLCBbJ2N1c3RvbWVyR2V0Q2FsbExpc3QnLCBbJ3JldHVybk9wZW4nLCAncmV0dXJuQ2xvc2VkJywgJ3JldHVybkNhbmNlbGxlZCcsICdmb3JtYXRWYWx1ZXMnLCAncmV0dXJuTWV0YScsICdyZXR1cm5SYXdWYWx1ZXMnLF1dLCBbJ2N1c3RvbWVyR2V0UHJvZmlsZUNvZGVUcmVlJywgWydub2RlJywgJ2ZpbHRlcicsICdyZXR1cm5GdWxsVHJlZScsICdyZXR1cm5JbmFjdGl2ZUNvZGVzJyxdXSwgWydjdXN0b21lckdldFJlc29sdXRpb25Db2RlVHJlZScsIFsnbm9kZScsICdmaWx0ZXInLCAncmV0dXJuRnVsbFRyZWUnLCAncmV0dXJuSW5hY3RpdmVDb2RlcycsXV0sIFsnY3VzdG9tZXJMb2dOZXdDYWxsJywgWydsb2dJbmNvbWluZycsICdjYWxsQ2xhc3MnLCAnc2xhTmFtZScsICdhc3NldElkJywgJ2Nvc3RDZW50ZXInLCAncHJvYkNvZGUnLCAnc2l0ZScsICdjb25kaXRpb24nLCAnZ3JvdXBJZCcsICdhbmFseXN0SWQnLCAndGltZVNwZW50JywgJ3VwZGF0ZU1lc3NhZ2UnLCAndXBkYXRlQ29kZScsICd1cGRhdGVTb3VyY2UnLCAnZmlsZUF0dGFjaG1lbnQnLCAnYWRkaXRpb25hbENhbGxWYWx1ZXMnLF1dLCBbJ2N1c3RvbWVyVXBkYXRlQ2FsbCcsIFsnY2FsbHJlZicsICd0aW1lU3BlbnQnLCAnZGVzY3JpcHRpb24nLCAndXBkYXRlU291cmNlJywgJ3VwZGF0ZUNvZGUnLCAnZmlsZUF0dGFjaG1lbnQnLCAnZXh0cmFVcGRhdGVEYlZhbHVlcycsXV0sIFsnY3VzdG9tZXJVcGRhdGVDYWxsVmFsdWVzJywgWydjYWxscmVmJywgJ2FjdGlvblZlcmInLCAndXBkYXRlTWVzc2FnZScsICdhZGRpdGlvbmFsQ2FsbFZhbHVlcycsXV0sIFsncmVxdWVzdFBhc3N3b3JkUmVzZXQnLCBbJ3NlbGZTZXJ2aWNlSWQnLCAnY3VzdG9tZXJJZCcsICdsb2dpbklkJyxdXSwgWyd2ZXJpZnlQYXNzd29yZFJlc2V0VG9rZW4nLCBbJ3NlbGZTZXJ2aWNlSWQnLCAnY3VzdG9tZXJJZCcsICdsb2dpbklkJywgJ3Rva2VuJywgJ3Bhc3N3b3JkJyxdXSxdKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNoYW5nZVBhc3N3b3JkKG9sZFBhc3N3b3JkOiBzdHJpbmcsIG5ld1Bhc3N3b3JkOiBzdHJpbmcsIG9wdGlvbmFsUGFyYW1zPzogcGFyYW1UeXBlcy5jaGFuZ2VQYXNzd29yZFBhcmFtcyk6IFByb21pc2U8WG1sbWNSZXNwb25zZSB8IEF4aW9zRXJyb3I+IHtcbiAgICAgICAgICAgIGxldCByZXF1ZXN0ID0gbmV3IFJlcXVlc3QodGhpcy5zZXJ2aWNlLCAnY2hhbmdlUGFzc3dvcmQnLCA8WG1sbWNQYXJhbXM+T2JqZWN0LmFzc2lnbih7fSwge1xuICAgICAgICAgICAgICAgIG9sZFBhc3N3b3JkLFxuICAgICAgICAgICAgICAgIG5ld1Bhc3N3b3JkXG4gICAgICAgICAgICB9LCBvcHRpb25hbFBhcmFtcyB8fCB7fSksIHRoaXMucGFyYW1NYXAuZ2V0KCdjaGFuZ2VQYXNzd29yZCcpIHx8IFtdKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb24uc2VuZFJlcXVlc3QocmVxdWVzdClcbiAgICAgICAgfVxuXG4gICAgICAgIGN1c3RvbWVyQ2FuY2VsQ2FsbChjYWxsUmVmOiBudW1iZXIsIGRlc2NyaXB0aW9uOiBzdHJpbmcsIG9wdGlvbmFsUGFyYW1zPzogcGFyYW1UeXBlcy5jdXN0b21lckNhbmNlbENhbGxQYXJhbXMpOiBQcm9taXNlPFhtbG1jUmVzcG9uc2UgfCBBeGlvc0Vycm9yPiB7XG4gICAgICAgICAgICBsZXQgcmVxdWVzdCA9IG5ldyBSZXF1ZXN0KHRoaXMuc2VydmljZSwgJ2N1c3RvbWVyQ2FuY2VsQ2FsbCcsIDxYbWxtY1BhcmFtcz5PYmplY3QuYXNzaWduKHt9LCB7XG4gICAgICAgICAgICAgICAgY2FsbFJlZixcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvblxuICAgICAgICAgICAgfSwgb3B0aW9uYWxQYXJhbXMgfHwge30pLCB0aGlzLnBhcmFtTWFwLmdldCgnY3VzdG9tZXJDYW5jZWxDYWxsJykgfHwgW10pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29ubmVjdGlvbi5zZW5kUmVxdWVzdChyZXF1ZXN0KVxuICAgICAgICB9XG5cbiAgICAgICAgY3VzdG9tZXJHZXRDYWxsRGV0YWlscyhjYWxscmVmOiBudW1iZXIsIG9wdGlvbmFsUGFyYW1zPzogcGFyYW1UeXBlcy5jdXN0b21lckdldENhbGxEZXRhaWxzUGFyYW1zKTogUHJvbWlzZTxYbWxtY1Jlc3BvbnNlIHwgQXhpb3NFcnJvcj4ge1xuICAgICAgICAgICAgbGV0IHJlcXVlc3QgPSBuZXcgUmVxdWVzdCh0aGlzLnNlcnZpY2UsICdjdXN0b21lckdldENhbGxEZXRhaWxzJywgPFhtbG1jUGFyYW1zPk9iamVjdC5hc3NpZ24oe30sIHtjYWxscmVmfSwgb3B0aW9uYWxQYXJhbXMgfHwge30pLCB0aGlzLnBhcmFtTWFwLmdldCgnY3VzdG9tZXJHZXRDYWxsRGV0YWlscycpIHx8IFtdKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb24uc2VuZFJlcXVlc3QocmVxdWVzdClcbiAgICAgICAgfVxuXG4gICAgICAgIGN1c3RvbWVyR2V0Q2FsbExpc3Qob3B0aW9uYWxQYXJhbXM/OiBwYXJhbVR5cGVzLmN1c3RvbWVyR2V0Q2FsbExpc3RQYXJhbXMpOiBQcm9taXNlPFhtbG1jUmVzcG9uc2UgfCBBeGlvc0Vycm9yPiB7XG4gICAgICAgICAgICBsZXQgcmVxdWVzdCA9IG5ldyBSZXF1ZXN0KHRoaXMuc2VydmljZSwgJ2N1c3RvbWVyR2V0Q2FsbExpc3QnLCA8WG1sbWNQYXJhbXM+KG9wdGlvbmFsUGFyYW1zIHx8IHt9KSwgdGhpcy5wYXJhbU1hcC5nZXQoJ2N1c3RvbWVyR2V0Q2FsbExpc3QnKSB8fCBbXSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uLnNlbmRSZXF1ZXN0KHJlcXVlc3QpXG4gICAgICAgIH1cblxuICAgICAgICBjdXN0b21lckdldFByb2ZpbGVDb2RlVHJlZShvcHRpb25hbFBhcmFtcz86IHBhcmFtVHlwZXMuY3VzdG9tZXJHZXRQcm9maWxlQ29kZVRyZWVQYXJhbXMpOiBQcm9taXNlPFhtbG1jUmVzcG9uc2UgfCBBeGlvc0Vycm9yPiB7XG4gICAgICAgICAgICBsZXQgcmVxdWVzdCA9IG5ldyBSZXF1ZXN0KHRoaXMuc2VydmljZSwgJ2N1c3RvbWVyR2V0UHJvZmlsZUNvZGVUcmVlJywgPFhtbG1jUGFyYW1zPihvcHRpb25hbFBhcmFtcyB8fCB7fSksIHRoaXMucGFyYW1NYXAuZ2V0KCdjdXN0b21lckdldFByb2ZpbGVDb2RlVHJlZScpIHx8IFtdKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb24uc2VuZFJlcXVlc3QocmVxdWVzdClcbiAgICAgICAgfVxuXG4gICAgICAgIGN1c3RvbWVyR2V0UmVzb2x1dGlvbkNvZGVUcmVlKG9wdGlvbmFsUGFyYW1zPzogcGFyYW1UeXBlcy5jdXN0b21lckdldFJlc29sdXRpb25Db2RlVHJlZVBhcmFtcyk6IFByb21pc2U8WG1sbWNSZXNwb25zZSB8IEF4aW9zRXJyb3I+IHtcbiAgICAgICAgICAgIGxldCByZXF1ZXN0ID0gbmV3IFJlcXVlc3QodGhpcy5zZXJ2aWNlLCAnY3VzdG9tZXJHZXRSZXNvbHV0aW9uQ29kZVRyZWUnLCA8WG1sbWNQYXJhbXM+KG9wdGlvbmFsUGFyYW1zIHx8IHt9KSwgdGhpcy5wYXJhbU1hcC5nZXQoJ2N1c3RvbWVyR2V0UmVzb2x1dGlvbkNvZGVUcmVlJykgfHwgW10pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29ubmVjdGlvbi5zZW5kUmVxdWVzdChyZXF1ZXN0KVxuICAgICAgICB9XG5cbiAgICAgICAgY3VzdG9tZXJMb2dOZXdDYWxsKGNhbGxDbGFzczogc3RyaW5nLCBncm91cElkOiBzdHJpbmcsIG9wdGlvbmFsUGFyYW1zPzogcGFyYW1UeXBlcy5jdXN0b21lckxvZ05ld0NhbGxQYXJhbXMpOiBQcm9taXNlPFhtbG1jUmVzcG9uc2UgfCBBeGlvc0Vycm9yPiB7XG4gICAgICAgICAgICBsZXQgcmVxdWVzdCA9IG5ldyBSZXF1ZXN0KHRoaXMuc2VydmljZSwgJ2N1c3RvbWVyTG9nTmV3Q2FsbCcsIDxYbWxtY1BhcmFtcz5PYmplY3QuYXNzaWduKHt9LCB7XG4gICAgICAgICAgICAgICAgY2FsbENsYXNzLFxuICAgICAgICAgICAgICAgIGdyb3VwSWRcbiAgICAgICAgICAgIH0sIG9wdGlvbmFsUGFyYW1zIHx8IHt9KSwgdGhpcy5wYXJhbU1hcC5nZXQoJ2N1c3RvbWVyTG9nTmV3Q2FsbCcpIHx8IFtdKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb24uc2VuZFJlcXVlc3QocmVxdWVzdClcbiAgICAgICAgfVxuXG4gICAgICAgIGN1c3RvbWVyVXBkYXRlQ2FsbChjYWxscmVmOiBudW1iZXIsIHRpbWVTcGVudDogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nLCBvcHRpb25hbFBhcmFtcz86IHBhcmFtVHlwZXMuY3VzdG9tZXJVcGRhdGVDYWxsUGFyYW1zKTogUHJvbWlzZTxYbWxtY1Jlc3BvbnNlIHwgQXhpb3NFcnJvcj4ge1xuICAgICAgICAgICAgbGV0IHJlcXVlc3QgPSBuZXcgUmVxdWVzdCh0aGlzLnNlcnZpY2UsICdjdXN0b21lclVwZGF0ZUNhbGwnLCA8WG1sbWNQYXJhbXM+T2JqZWN0LmFzc2lnbih7fSwge1xuICAgICAgICAgICAgICAgIGNhbGxyZWYsXG4gICAgICAgICAgICAgICAgdGltZVNwZW50LFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uXG4gICAgICAgICAgICB9LCBvcHRpb25hbFBhcmFtcyB8fCB7fSksIHRoaXMucGFyYW1NYXAuZ2V0KCdjdXN0b21lclVwZGF0ZUNhbGwnKSB8fCBbXSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uLnNlbmRSZXF1ZXN0KHJlcXVlc3QpXG4gICAgICAgIH1cblxuICAgICAgICBjdXN0b21lclVwZGF0ZUNhbGxWYWx1ZXMoY2FsbHJlZjogbnVtYmVyLCBhZGRpdGlvbmFsQ2FsbFZhbHVlczogT2JqZWN0LCBvcHRpb25hbFBhcmFtcz86IHBhcmFtVHlwZXMuY3VzdG9tZXJVcGRhdGVDYWxsVmFsdWVzUGFyYW1zKTogUHJvbWlzZTxYbWxtY1Jlc3BvbnNlIHwgQXhpb3NFcnJvcj4ge1xuICAgICAgICAgICAgbGV0IHJlcXVlc3QgPSBuZXcgUmVxdWVzdCh0aGlzLnNlcnZpY2UsICdjdXN0b21lclVwZGF0ZUNhbGxWYWx1ZXMnLCA8WG1sbWNQYXJhbXM+T2JqZWN0LmFzc2lnbih7fSwge1xuICAgICAgICAgICAgICAgIGNhbGxyZWYsXG4gICAgICAgICAgICAgICAgYWRkaXRpb25hbENhbGxWYWx1ZXNcbiAgICAgICAgICAgIH0sIG9wdGlvbmFsUGFyYW1zIHx8IHt9KSwgdGhpcy5wYXJhbU1hcC5nZXQoJ2N1c3RvbWVyVXBkYXRlQ2FsbFZhbHVlcycpIHx8IFtdKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb24uc2VuZFJlcXVlc3QocmVxdWVzdClcbiAgICAgICAgfVxuXG4gICAgICAgIHJlcXVlc3RQYXNzd29yZFJlc2V0KHNlbGZTZXJ2aWNlSWQ6IHN0cmluZywgb3B0aW9uYWxQYXJhbXM/OiBwYXJhbVR5cGVzLnJlcXVlc3RQYXNzd29yZFJlc2V0UGFyYW1zKTogUHJvbWlzZTxYbWxtY1Jlc3BvbnNlIHwgQXhpb3NFcnJvcj4ge1xuICAgICAgICAgICAgbGV0IHJlcXVlc3QgPSBuZXcgUmVxdWVzdCh0aGlzLnNlcnZpY2UsICdyZXF1ZXN0UGFzc3dvcmRSZXNldCcsIDxYbWxtY1BhcmFtcz5PYmplY3QuYXNzaWduKHt9LCB7c2VsZlNlcnZpY2VJZH0sIG9wdGlvbmFsUGFyYW1zIHx8IHt9KSwgdGhpcy5wYXJhbU1hcC5nZXQoJ3JlcXVlc3RQYXNzd29yZFJlc2V0JykgfHwgW10pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29ubmVjdGlvbi5zZW5kUmVxdWVzdChyZXF1ZXN0KVxuICAgICAgICB9XG5cbiAgICAgICAgdmVyaWZ5UGFzc3dvcmRSZXNldFRva2VuKHNlbGZTZXJ2aWNlSWQ6IHN0cmluZywgdG9rZW46IHN0cmluZywgcGFzc3dvcmQ6IHN0cmluZywgb3B0aW9uYWxQYXJhbXM/OiBwYXJhbVR5cGVzLnZlcmlmeVBhc3N3b3JkUmVzZXRUb2tlblBhcmFtcyk6IFByb21pc2U8WG1sbWNSZXNwb25zZSB8IEF4aW9zRXJyb3I+IHtcbiAgICAgICAgICAgIGxldCByZXF1ZXN0ID0gbmV3IFJlcXVlc3QodGhpcy5zZXJ2aWNlLCAndmVyaWZ5UGFzc3dvcmRSZXNldFRva2VuJywgPFhtbG1jUGFyYW1zPk9iamVjdC5hc3NpZ24oe30sIHtcbiAgICAgICAgICAgICAgICBzZWxmU2VydmljZUlkLFxuICAgICAgICAgICAgICAgIHRva2VuLFxuICAgICAgICAgICAgICAgIHBhc3N3b3JkXG4gICAgICAgICAgICB9LCBvcHRpb25hbFBhcmFtcyB8fCB7fSksIHRoaXMucGFyYW1NYXAuZ2V0KCd2ZXJpZnlQYXNzd29yZFJlc2V0VG9rZW4nKSB8fCBbXSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uLnNlbmRSZXF1ZXN0KHJlcXVlc3QpXG4gICAgICAgIH1cbiAgICB9XG5cbiJdfQ==