"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const Request_1 = require("../Request");
class Mylibrary {
    constructor(connection, xmlmc) {
        this.connection = connection;
        this.xmlmc = xmlmc;
        this.service = 'mylibrary';
        this.paramMap = new Map([['addUserLibraryResource', ['resource',]], ['createFolder', ['folder',]], ['deleteFile', ['file',]], ['deleteFolder', ['folder', 'forceDelete',]], ['deleteUserLibraryResource', ['name',]], ['getFile', ['path',]], ['getFolder', ['path', 'includeFiles',]], ['getFolderFromPath', ['path', 'includeSubFolders',]], ['putFile', ['path', 'forceOverwrite', 'file',]], ['renameItem', ['path', 'newName',]],]);
    }
    addUserLibraryResource(resource, optionalParams) {
        let request = new Request_1.Request(this.service, 'addUserLibraryResource', Object.assign({}, { resource }, optionalParams || {}), this.paramMap.get('addUserLibraryResource') || []);
        return this.connection.sendRequest(request);
    }
    createFolder(folder, optionalParams) {
        let request = new Request_1.Request(this.service, 'createFolder', Object.assign({}, { folder }, optionalParams || {}), this.paramMap.get('createFolder') || []);
        return this.connection.sendRequest(request);
    }
    deleteFile(file, optionalParams) {
        let request = new Request_1.Request(this.service, 'deleteFile', Object.assign({}, { file }, optionalParams || {}), this.paramMap.get('deleteFile') || []);
        return this.connection.sendRequest(request);
    }
    deleteFolder(folder, optionalParams) {
        let request = new Request_1.Request(this.service, 'deleteFolder', Object.assign({}, { folder }, optionalParams || {}), this.paramMap.get('deleteFolder') || []);
        return this.connection.sendRequest(request);
    }
    deleteUserLibraryResource(name, optionalParams) {
        let request = new Request_1.Request(this.service, 'deleteUserLibraryResource', Object.assign({}, { name }, optionalParams || {}), this.paramMap.get('deleteUserLibraryResource') || []);
        return this.connection.sendRequest(request);
    }
    getFile(path, optionalParams) {
        let request = new Request_1.Request(this.service, 'getFile', Object.assign({}, { path }, optionalParams || {}), this.paramMap.get('getFile') || []);
        return this.connection.sendRequest(request);
    }
    getFolder(optionalParams) {
        let request = new Request_1.Request(this.service, 'getFolder', (optionalParams || {}), this.paramMap.get('getFolder') || []);
        return this.connection.sendRequest(request);
    }
    getFolderFromPath(optionalParams) {
        let request = new Request_1.Request(this.service, 'getFolderFromPath', (optionalParams || {}), this.paramMap.get('getFolderFromPath') || []);
        return this.connection.sendRequest(request);
    }
    getUserLibraryResources(optionalParams) {
        let request = new Request_1.Request(this.service, 'getUserLibraryResources', (optionalParams || {}), this.paramMap.get('getUserLibraryResources') || []);
        return this.connection.sendRequest(request);
    }
    putFile(path, file, optionalParams) {
        let request = new Request_1.Request(this.service, 'putFile', Object.assign({}, {
            path,
            file
        }, optionalParams || {}), this.paramMap.get('putFile') || []);
        return this.connection.sendRequest(request);
    }
    renameItem(path, newName, optionalParams) {
        let request = new Request_1.Request(this.service, 'renameItem', Object.assign({}, {
            path,
            newName
        }, optionalParams || {}), this.paramMap.get('renameItem') || []);
        return this.connection.sendRequest(request);
    }
}
exports.Mylibrary = Mylibrary;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTXlsaWJyYXJ5LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL3NlcnZpY2VzL015bGlicmFyeS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUtBLHdDQUFrQztBQUU5QjtJQU1JLFlBQVksVUFBc0IsRUFBRSxLQUFZO1FBQzVDLElBQUksQ0FBQyxVQUFVLEdBQUcsVUFBVSxDQUFDO1FBQzdCLElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO1FBQ25CLElBQUksQ0FBQyxPQUFPLEdBQUcsV0FBVyxDQUFDO1FBQzNCLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxHQUFHLENBQUMsQ0FBQyxDQUFDLHdCQUF3QixFQUFFLENBQUMsVUFBVSxFQUFFLENBQUMsRUFBRSxDQUFDLGNBQWMsRUFBRSxDQUFDLFFBQVEsRUFBRSxDQUFDLEVBQUUsQ0FBQyxZQUFZLEVBQUUsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLENBQUMsY0FBYyxFQUFFLENBQUMsUUFBUSxFQUFFLGFBQWEsRUFBRSxDQUFDLEVBQUUsQ0FBQywyQkFBMkIsRUFBRSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLENBQUMsV0FBVyxFQUFFLENBQUMsTUFBTSxFQUFFLGNBQWMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxtQkFBbUIsRUFBRSxDQUFDLE1BQU0sRUFBRSxtQkFBbUIsRUFBRSxDQUFDLEVBQUUsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxNQUFNLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxFQUFFLENBQUMsRUFBRSxDQUFDLFlBQVksRUFBRSxDQUFDLE1BQU0sRUFBRSxTQUFTLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUM3YSxDQUFDO0lBRUQsc0JBQXNCLENBQUMsUUFBZ0IsRUFBRSxjQUF3RDtRQUM3RixJQUFJLE9BQU8sR0FBRyxJQUFJLGlCQUFPLENBQUMsSUFBSSxDQUFDLE9BQU8s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QUUsQ0FBQyxFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDO1FBQzlELE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsQ0FBQTtJQUMvQyxDQUFDO0lBRUQsVUFBVSxDQUFDLElBQVksRUFBRSxPQUFlLEVBQUUsY0FBNEM7UUFDbEYsSUFBSSxPQUFPLEdBQUcsSUFBSSxpQkFBTyxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsWUFBWSxFQUFlLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFO1lBQ2pGLElBQUk7WUFDSixPQUFPO1NBQ1YsRUFBRSxjQUFjLElBQUksRUFBRSxDQUFDLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsWUFBWSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUM7UUFDakUsTUFBTSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsV0FBVyxDQUFDLE9BQU8sQ0FBQyxDQUFBO0lBQy9DLENBQUM7Q0FDSjtBQXpFRCw4QkF5RUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBwYXJhbVR5cGVzIGZyb20gJy4uL3R5cGVzL015bGlicmFyeVR5cGVzJ1xuaW1wb3J0IHtBeGlvc0Vycm9yLCBBeGlvc1Jlc3BvbnNlfSBmcm9tIFwiYXhpb3NcIjtcbmltcG9ydCB7WG1sbWNQYXJhbXN9IGZyb20gXCIuLi90eXBlcy9YbWxtY1R5cGVzXCI7XG5pbXBvcnQge0Nvbm5lY3Rpb24sIFhtbG1jUmVzcG9uc2V9IGZyb20gJy4uL0Nvbm5lY3Rpb24nXG5pbXBvcnQgWG1sbWMgZnJvbSAnLi4vWG1sTWV0aG9kQ2FsbCdcbmltcG9ydCB7UmVxdWVzdH0gZnJvbSAnLi4vUmVxdWVzdCdcblxuICAgIGV4cG9ydCBjbGFzcyBNeWxpYnJhcnkge1xuICAgICAgICBwcml2YXRlIGNvbm5lY3Rpb246IENvbm5lY3Rpb247XG4gICAgICAgIHByaXZhdGUgeG1sbWM6IFhtbG1jO1xuICAgICAgICBwcml2YXRlIHNlcnZpY2U6IHN0cmluZztcbiAgICAgICAgcHJpdmF0ZSBwYXJhbU1hcDogTWFwPHN0cmluZywgQXJyYXk8c3RyaW5nPj47XG5cbiAgICAgICAgY29uc3RydWN0b3IoY29ubmVjdGlvbjogQ29ubmVjdGlvbiwgeG1sbWM6IFhtbG1jKSB7XG4gICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb24gPSBjb25uZWN0aW9uO1xuICAgICAgICAgICAgdGhpcy54bWxtYyA9IHhtbG1jO1xuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlID0gJ215bGlicmFyeSc7XG4gICAgICAgICAgICB0aGlzLnBhcmFtTWFwID0gbmV3IE1hcChbWydhZGRVc2VyTGlicmFyeVJlc291cmNlJywgWydyZXNvdXJjZScsXV0sIFsnY3JlYXRlRm9sZGVyJywgWydmb2xkZXInLF1dLCBbJ2RlbGV0ZUZpbGUnLCBbJ2ZpbGUnLF1dLCBbJ2RlbGV0ZUZvbGRlcicsIFsnZm9sZGVyJywgJ2ZvcmNlRGVsZXRlJyxdXSwgWydkZWxldGVVc2VyTGlicmFyeVJlc291cmNlJywgWyduYW1lJyxdXSwgWydnZXRGaWxlJywgWydwYXRoJyxdXSwgWydnZXRGb2xkZXInLCBbJ3BhdGgnLCAnaW5jbHVkZUZpbGVzJyxdXSwgWydnZXRGb2xkZXJGcm9tUGF0aCcsIFsncGF0aCcsICdpbmNsdWRlU3ViRm9sZGVycycsXV0sIFsncHV0RmlsZScsIFsncGF0aCcsICdmb3JjZU92ZXJ3cml0ZScsICdmaWxlJyxdXSwgWydyZW5hbWVJdGVtJywgWydwYXRoJywgJ25ld05hbWUnLF1dLF0pO1xuICAgICAgICB9XG5cbiAgICAgICAgYWRkVXNlckxpYnJhcnlSZXNvdXJjZShyZXNvdXJjZTogT2JqZWN0LCBvcHRpb25hbFBhcmFtcz86IHBhcmFtVHlwZXMuYWRkVXNlckxpYnJhcnlSZXNvdXJjZVBhcmFtcyk6IFByb21pc2U8WG1sbWNSZXNwb25zZSB8IEF4aW9zRXJyb3I+IHtcbiAgICAgICAgICAgIGxldCByZXF1ZXN0ID0gbmV3IFJlcXVlc3QodGhpcy5zZXJ2aWNlLCAnYWRkVXNlckxpYnJhcnlSZXNvdXJjZScsIDxYbWxtY1BhcmFtcz5PYmplY3QuYXNzaWduKHt9LCB7cmVzb3VyY2V9LCBvcHRpb25hbFBhcmFtcyB8fCB7fSksIHRoaXMucGFyYW1NYXAuZ2V0KCdhZGRVc2VyTGlicmFyeVJlc291cmNlJykgfHwgW10pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29ubmVjdGlvbi5zZW5kUmVxdWVzdChyZXF1ZXN0KVxuICAgICAgICB9XG5cbiAgICAgICAgY3JlYXRlRm9sZGVyKGZvbGRlcjogc3RyaW5nLCBvcHRpb25hbFBhcmFtcz86IHBhcmFtVHlwZXMuY3JlYXRlRm9sZGVyUGFyYW1zKTogUHJvbWlzZTxYbWxtY1Jlc3BvbnNlIHwgQXhpb3NFcnJvcj4ge1xuICAgICAgICAgICAgbGV0IHJlcXVlc3QgPSBuZXcgUmVxdWVzdCh0aGlzLnNlcnZpY2UsICdjcmVhdGVGb2xkZXInLCA8WG1sbWNQYXJhbXM+T2JqZWN0LmFzc2lnbih7fSwge2ZvbGRlcn0sIG9wdGlvbmFsUGFyYW1zIHx8IHt9KSwgdGhpcy5wYXJhbU1hcC5nZXQoJ2NyZWF0ZUZvbGRlcicpIHx8IFtdKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb24uc2VuZFJlcXVlc3QocmVxdWVzdClcbiAgICAgICAgfVxuXG4gICAgICAgIGRlbGV0ZUZpbGUoZmlsZTogc3RyaW5nLCBvcHRpb25hbFBhcmFtcz86IHBhcmFtVHlwZXMuZGVsZXRlRmlsZVBhcmFtcyk6IFByb21pc2U8WG1sbWNSZXNwb25zZSB8IEF4aW9zRXJyb3I+IHtcbiAgICAgICAgICAgIGxldCByZXF1ZXN0ID0gbmV3IFJlcXVlc3QodGhpcy5zZXJ2aWNlLCAnZGVsZXRlRmlsZScsIDxYbWxtY1BhcmFtcz5PYmplY3QuYXNzaWduKHt9LCB7ZmlsZX0sIG9wdGlvbmFsUGFyYW1zIHx8IHt9KSwgdGhpcy5wYXJhbU1hcC5nZXQoJ2RlbGV0ZUZpbGUnKSB8fCBbXSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uLnNlbmRSZXF1ZXN0KHJlcXVlc3QpXG4gICAgICAgIH1cblxuICAgICAgICBkZWxldGVGb2xkZXIoZm9sZGVyOiBzdHJpbmcsIG9wdGlvbmFsUGFyYW1zPzogcGFyYW1UeXBlcy5kZWxldGVGb2xkZXJQYXJhbXMpOiBQcm9taXNlPFhtbG1jUmVzcG9uc2UgfCBBeGlvc0Vycm9yPiB7XG4gICAgICAgICAgICBsZXQgcmVxdWVzdCA9IG5ldyBSZXF1ZXN0KHRoaXMuc2VydmljZSwgJ2RlbGV0ZUZvbGRlcicsIDxYbWxtY1BhcmFtcz5PYmplY3QuYXNzaWduKHt9LCB7Zm9sZGVyfSwgb3B0aW9uYWxQYXJhbXMgfHwge30pLCB0aGlzLnBhcmFtTWFwLmdldCgnZGVsZXRlRm9sZGVyJykgfHwgW10pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29ubmVjdGlvbi5zZW5kUmVxdWVzdChyZXF1ZXN0KVxuICAgICAgICB9XG5cbiAgICAgICAgZGVsZXRlVXNlckxpYnJhcnlSZXNvdXJjZShuYW1lOiBzdHJpbmcsIG9wdGlvbmFsUGFyYW1zPzogcGFyYW1UeXBlcy5kZWxldGVVc2VyTGlicmFyeVJlc291cmNlUGFyYW1zKTogUHJvbWlzZTxYbWxtY1Jlc3BvbnNlIHwgQXhpb3NFcnJvcj4ge1xuICAgICAgICAgICAgbGV0IHJlcXVlc3QgPSBuZXcgUmVxdWVzdCh0aGlzLnNlcnZpY2UsICdkZWxldGVVc2VyTGlicmFyeVJlc291cmNlJywgPFhtbG1jUGFyYW1zPk9iamVjdC5hc3NpZ24oe30sIHtuYW1lfSwgb3B0aW9uYWxQYXJhbXMgfHwge30pLCB0aGlzLnBhcmFtTWFwLmdldCgnZGVsZXRlVXNlckxpYnJhcnlSZXNvdXJjZScpIHx8IFtdKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb24uc2VuZFJlcXVlc3QocmVxdWVzdClcbiAgICAgICAgfVxuXG4gICAgICAgIGdldEZpbGUocGF0aDogc3RyaW5nLCBvcHRpb25hbFBhcmFtcz86IHBhcmFtVHlwZXMuZ2V0RmlsZVBhcmFtcyk6IFByb21pc2U8WG1sbWNSZXNwb25zZSB8IEF4aW9zRXJyb3I+IHtcbiAgICAgICAgICAgIGxldCByZXF1ZXN0ID0gbmV3IFJlcXVlc3QodGhpcy5zZXJ2aWNlLCAnZ2V0RmlsZScsIDxYbWxtY1BhcmFtcz5PYmplY3QuYXNzaWduKHt9LCB7cGF0aH0sIG9wdGlvbmFsUGFyYW1zIHx8IHt9KSwgdGhpcy5wYXJhbU1hcC5nZXQoJ2dldEZpbGUnKSB8fCBbXSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uLnNlbmRSZXF1ZXN0KHJlcXVlc3QpXG4gICAgICAgIH1cblxuICAgICAgICBnZXRGb2xkZXIob3B0aW9uYWxQYXJhbXM/OiBwYXJhbVR5cGVzLmdldEZvbGRlclBhcmFtcyk6IFByb21pc2U8WG1sbWNSZXNwb25zZSB8IEF4aW9zRXJyb3I+IHtcbiAgICAgICAgICAgIGxldCByZXF1ZXN0ID0gbmV3IFJlcXVlc3QodGhpcy5zZXJ2aWNlLCAnZ2V0Rm9sZGVyJywgPFhtbG1jUGFyYW1zPihvcHRpb25hbFBhcmFtcyB8fCB7fSksIHRoaXMucGFyYW1NYXAuZ2V0KCdnZXRGb2xkZXInKSB8fCBbXSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uLnNlbmRSZXF1ZXN0KHJlcXVlc3QpXG4gICAgICAgIH1cblxuICAgICAgICBnZXRGb2xkZXJGcm9tUGF0aChvcHRpb25hbFBhcmFtcz86IHBhcmFtVHlwZXMuZ2V0Rm9sZGVyRnJvbVBhdGhQYXJhbXMpOiBQcm9taXNlPFhtbG1jUmVzcG9uc2UgfCBBeGlvc0Vycm9yPiB7XG4gICAgICAgICAgICBsZXQgcmVxdWVzdCA9IG5ldyBSZXF1ZXN0KHRoaXMuc2VydmljZSwgJ2dldEZvbGRlckZyb21QYXRoJywgPFhtbG1jUGFyYW1zPihvcHRpb25hbFBhcmFtcyB8fCB7fSksIHRoaXMucGFyYW1NYXAuZ2V0KCdnZXRGb2xkZXJGcm9tUGF0aCcpIHx8IFtdKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb24uc2VuZFJlcXVlc3QocmVxdWVzdClcbiAgICAgICAgfVxuXG4gICAgICAgIGdldFVzZXJMaWJyYXJ5UmVzb3VyY2VzKG9wdGlvbmFsUGFyYW1zPzogcGFyYW1UeXBlcy5nZXRVc2VyTGlicmFyeVJlc291cmNlc1BhcmFtcyk6IFByb21pc2U8WG1sbWNSZXNwb25zZSB8IEF4aW9zRXJyb3I+IHtcbiAgICAgICAgICAgIGxldCByZXF1ZXN0ID0gbmV3IFJlcXVlc3QodGhpcy5zZXJ2aWNlLCAnZ2V0VXNlckxpYnJhcnlSZXNvdXJjZXMnLCA8WG1sbWNQYXJhbXM+KG9wdGlvbmFsUGFyYW1zIHx8IHt9KSwgdGhpcy5wYXJhbU1hcC5nZXQoJ2dldFVzZXJMaWJyYXJ5UmVzb3VyY2VzJykgfHwgW10pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29ubmVjdGlvbi5zZW5kUmVxdWVzdChyZXF1ZXN0KVxuICAgICAgICB9XG5cbiAgICAgICAgcHV0RmlsZShwYXRoOiBzdHJpbmcsIGZpbGU6IE9iamVjdCwgb3B0aW9uYWxQYXJhbXM/OiBwYXJhbVR5cGVzLnB1dEZpbGVQYXJhbXMpOiBQcm9taXNlPFhtbG1jUmVzcG9uc2UgfCBBeGlvc0Vycm9yPiB7XG4gICAgICAgICAgICBsZXQgcmVxdWVzdCA9IG5ldyBSZXF1ZXN0KHRoaXMuc2VydmljZSwgJ3B1dEZpbGUnLCA8WG1sbWNQYXJhbXM+T2JqZWN0LmFzc2lnbih7fSwge1xuICAgICAgICAgICAgICAgIHBhdGgsXG4gICAgICAgICAgICAgICAgZmlsZVxuICAgICAgICAgICAgfSwgb3B0aW9uYWxQYXJhbXMgfHwge30pLCB0aGlzLnBhcmFtTWFwLmdldCgncHV0RmlsZScpIHx8IFtdKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb24uc2VuZFJlcXVlc3QocmVxdWVzdClcbiAgICAgICAgfVxuXG4gICAgICAgIHJlbmFtZUl0ZW0ocGF0aDogc3RyaW5nLCBuZXdOYW1lOiBzdHJpbmcsIG9wdGlvbmFsUGFyYW1zPzogcGFyYW1UeXBlcy5yZW5hbWVJdGVtUGFyYW1zKTogUHJvbWlzZTxYbWxtY1Jlc3BvbnNlIHwgQXhpb3NFcnJvcj4ge1xuICAgICAgICAgICAgbGV0IHJlcXVlc3QgPSBuZXcgUmVxdWVzdCh0aGlzLnNlcnZpY2UsICdyZW5hbWVJdGVtJywgPFhtbG1jUGFyYW1zPk9iamVjdC5hc3NpZ24oe30sIHtcbiAgICAgICAgICAgICAgICBwYXRoLFxuICAgICAgICAgICAgICAgIG5ld05hbWVcbiAgICAgICAgICAgIH0sIG9wdGlvbmFsUGFyYW1zIHx8IHt9KSwgdGhpcy5wYXJhbU1hcC5nZXQoJ3JlbmFtZUl0ZW0nKSB8fCBbXSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uLnNlbmRSZXF1ZXN0KHJlcXVlc3QpXG4gICAgICAgIH1cbiAgICB9XG5cbiJdfQ==