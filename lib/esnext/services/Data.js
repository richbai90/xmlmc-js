"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const Request_1 = require("../Request");
class Data {
    constructor(connection, xmlmc) {
        this.connection = connection;
        this.xmlmc = xmlmc;
        this.service = 'data';
        this.paramMap = new Map([['addRecord', ['table', 'returnModifiedData',]], ['deleteRecord', ['table', 'keyValue',]], ['getColumnInfoList', ['database', 'table',]], ['getRecord', ['database', 'table', 'keyValue', 'formatValues', 'returnMeta', 'returnRawValues',]], ['getStoredQueryList', ['folder',]], ['getTableInfoList', ['database',]], ['invokeStoredQuery', ['storedQuery', 'parameters',]], ['runDataImport', ['confFileName', 'dataFileName',]], ['sqlQuery', ['database', 'query', 'rowOffset', 'rowCount', 'formatValues', 'returnMeta', 'maxResults', 'returnRawValues',]], ['updateRecord', ['table', 'returnModifiedData',]],]);
    }
    addRecord(table, optionalParams) {
        let request = new Request_1.Request(this.service, 'addRecord', Object.assign({}, { table }, optionalParams || {}), this.paramMap.get('addRecord') || []);
        return this.connection.sendRequest(request);
    }
    deleteRecord(table, keyValue, optionalParams) {
        let request = new Request_1.Request(this.service, 'deleteRecord', Object.assign({}, {
            table,
            keyValue
        }, optionalParams || {}), this.paramMap.get('deleteRecord') || []);
        return this.connection.sendRequest(request);
    }
    getColumnInfoList(database, table, optionalParams) {
        let request = new Request_1.Request(this.service, 'getColumnInfoList', Object.assign({}, {
            database,
            table
        }, optionalParams || {}), this.paramMap.get('getColumnInfoList') || []);
        return this.connection.sendRequest(request);
    }
    getRecord(table, keyValue, optionalParams) {
        let request = new Request_1.Request(this.service, 'getRecord', Object.assign({}, {
            table,
            keyValue
        }, optionalParams || {}), this.paramMap.get('getRecord') || []);
        return this.connection.sendRequest(request);
    }
    getStoredQueryList(optionalParams) {
        let request = new Request_1.Request(this.service, 'getStoredQueryList', (optionalParams || {}), this.paramMap.get('getStoredQueryList') || []);
        return this.connection.sendRequest(request);
    }
    getTableInfoList(database, optionalParams) {
        let request = new Request_1.Request(this.service, 'getTableInfoList', Object.assign({}, { database }, optionalParams || {}), this.paramMap.get('getTableInfoList') || []);
        return this.connection.sendRequest(request);
    }
    invokeStoredQuery(storedQuery, optionalParams) {
        let request = new Request_1.Request(this.service, 'invokeStoredQuery', Object.assign({}, { storedQuery }, optionalParams || {}), this.paramMap.get('invokeStoredQuery') || []);
        return this.connection.sendRequest(request);
    }
    runDataImport(confFileName, dataFileName, optionalParams) {
        let request = new Request_1.Request(this.service, 'runDataImport', Object.assign({}, {
            confFileName,
            dataFileName
        }, optionalParams || {}), this.paramMap.get('runDataImport') || []);
        return this.connection.sendRequest(request);
    }
    sqlQuery(database, query, optionalParams) {
        let request = new Request_1.Request(this.service, 'sqlQuery', Object.assign({}, {
            database,
            query
        }, optionalParams || {}), this.paramMap.get('sqlQuery') || []);
        return this.connection.sendRequest(request);
    }
    updateRecord(table, optionalParams) {
        let request = new Request_1.Request(this.service, 'updateRecord', Object.assign({}, { table }, optionalParams || {}), this.paramMap.get('updateRecord') || []);
        return this.connection.sendRequest(request);
    }
}
exports.Data = Data;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRGF0YS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9zZXJ2aWNlcy9EYXRhLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBS0Esd0NBQWtDO0FBRzlCO0lBTUksWUFBWSxVQUFzQixFQUFFLEtBQVk7UUFDNUMsSUFBSSxDQUFDLFVBQVUsR0FBRyxVQUFVLENBQUM7UUFDN0IsSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7UUFDbkIsSUFBSSxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUM7UUFDdEIsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLEdBQUcsQ0FBQyxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUMsT0FBTyxFQUFFLG9CQUFvQixFQUFFLENBQUMsRUFBRSxDQUFDLGNBQWMsRUFBRSxDQUFDLE9BQU8sRUFBRSxVQUFVLEVBQUUsQ0FBQyxFQUFFLENBQUMsbUJBQW1CLEVBQUUsQ0FBQyxVQUFVLEVBQUUsT0FBTyxFQUFFLENBQUMsRUFBRSxDQUFDLFdBQVcsRUFBRSxDQUFDLFVBQVUsRUFBRSxPQUFPLEVBQUUsVUFBVSxFQUFFLGNBQWMsRUFBRSxZQUFZLEVBQUUsaUJBQWlCLEVBQUUsQ0FBQyxFQUFFLENBQUMsb0JBQW9CLEVBQUUsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxFQUFFLENBQUMsa0JBQWtCLEVBQUUsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxFQUFFLENBQUMsbUJBQW1CLEVBQUUsQ0FBQyxhQUFhLEVBQUUsWUFBWSxFQUFFLENBQUMsRUFBRSxDQUFDLGVBQWUsRUFBRSxDQUFDLGNBQWMsRUFBRSxjQUFjLEVBQUUsQ0FBQyxFQUFFLENBQUMsVUFBVSxFQUFFLENBQUMsVUFBVSxFQUFFLE9BQU8sRUFBRSxXQUFXLEVBQUUsVUFBVSxFQUFFLGNBQWMsRUFBRSxZQUFZLEVBQUUsWUFBWSxFQUFFLGlCQUFpQixFQUFFLENBQUMsRUFBRSxDQUFDLGNBQWMsRUFBRSxDQUFDLE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxD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LGNBQWMsSUFBSSxFQUFFLENBQUMsRUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQztRQUMvRCxNQUFNLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLENBQUE7SUFDL0MsQ0FBQztJQUVELFlBQVksQ0FBQyxLQUFhLEVBQUUsY0FBOEM7UUFDdEUsSUFBSSxPQUFPLEdBQUcsSUFBSSxpQkFBTyxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsY0FBYyxFQUFlLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLEVBQUMsS0FBSyxFQUFDLEVBQUUsY0FBYyxJQUFJLEVBQUUsQ0FBQyxFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLGNBQWMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDO1FBQ2hLLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsQ0FBQTtJQUMvQyxDQUFDO0NBQ0o7QUE3RUQsb0JBNkVDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgcGFyYW1UeXBlcyBmcm9tICcuLi90eXBlcy9EYXRhVHlwZXMnXG5pbXBvcnQge0F4aW9zRXJyb3IsIEF4aW9zUmVzcG9uc2V9IGZyb20gXCJheGlvc1wiO1xuaW1wb3J0IHtYbWxtY1BhcmFtc30gZnJvbSBcIi4uL3R5cGVzL1htbG1jVHlwZXNcIjtcbmltcG9ydCB7Q29ubmVjdGlvbiwgWG1sbWNSZXNwb25zZX0gZnJvbSAnLi4vQ29ubmVjdGlvbidcbmltcG9ydCBYbWxtYyBmcm9tICcuLi9YbWxNZXRob2RDYWxsJ1xuaW1wb3J0IHtSZXF1ZXN0fSBmcm9tICcuLi9SZXF1ZXN0J1xuXG5cbiAgICBleHBvcnQgY2xhc3MgRGF0YSB7XG4gICAgICAgIHByaXZhdGUgY29ubmVjdGlvbjogQ29ubmVjdGlvbjtcbiAgICAgICAgcHJpdmF0ZSB4bWxtYzogWG1sbWM7XG4gICAgICAgIHByaXZhdGUgc2VydmljZTogc3RyaW5nO1xuICAgICAgICBwcml2YXRlIHBhcmFtTWFwOiBNYXA8c3RyaW5nLCBBcnJheTxzdHJpbmc+PjtcblxuICAgICAgICBjb25zdHJ1Y3Rvcihjb25uZWN0aW9uOiBDb25uZWN0aW9uLCB4bWxtYzogWG1sbWMpIHtcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdGlvbiA9IGNvbm5lY3Rpb247XG4gICAgICAgICAgICB0aGlzLnhtbG1jID0geG1sbWM7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2UgPSAnZGF0YSc7XG4gICAgICAgICAgICB0aGlzLnBhcmFtTWFwID0gbmV3IE1hcChbWydhZGRSZWNvcmQnLCBbJ3RhYmxlJywgJ3JldHVybk1vZGlmaWVkRGF0YScsXV0sIFsnZGVsZXRlUmVjb3JkJywgWyd0YWJsZScsICdrZXlWYWx1ZScsXV0sIFsnZ2V0Q29sdW1uSW5mb0xpc3QnLCBbJ2RhdGFiYXNlJywgJ3RhYmxlJyxdXSwgWydnZXRSZWNvcmQnLCBbJ2RhdGFiYXNlJywgJ3RhYmxlJywgJ2tleVZhbHVlJywgJ2Zvcm1hdFZhbHVlcycsICdyZXR1cm5NZXRhJywgJ3JldHVyblJhd1ZhbHVlcycsXV0sIFsnZ2V0U3RvcmVkUXVlcnlMaXN0JywgWydmb2xkZXInLF1dLCBbJ2dldFRhYmxlSW5mb0xpc3QnLCBbJ2RhdGFiYXNlJyxdXSwgWydpbnZva2VTdG9yZWRRdWVyeScsIFsnc3RvcmVkUXVlcnknLCAncGFyYW1ldGVycycsXV0sIFsncnVuRGF0YUltcG9ydCcsIFsnY29uZkZpbGVOYW1lJywgJ2RhdGFGaWxlTmFtZScsXV0sIFsnc3FsUXVlcnknLCBbJ2RhdGFiYXNlJywgJ3F1ZXJ5JywgJ3Jvd09mZnNldCcsICdyb3dDb3VudCcsICdmb3JtYXRWYWx1ZXMnLCAncmV0dXJuTWV0YScsICdtYXhSZXN1bHRzJywgJ3JldHVyblJhd1ZhbHVlcycsXV0sIFsndXBkYXRlUmVjb3JkJywgWyd0YWJsZScsICdyZXR1cm5Nb2RpZmllZERhdGEnLF1dLF0pO1xuICAgICAgICB9XG5cbiAgICAgICAgYWRkUmVjb3JkKHRhYmxlOiBzdHJpbmcsIG9wdGlvbmFsUGFyYW1zPzogcGFyYW1UeXBlcy5hZGRSZWNvcmRQYXJhbXMpOiBQcm9taXNlPFhtbG1jUmVzcG9uc2U+IHtcbiAgICAgICAgICAgIGxldCByZXF1ZXN0ID0gbmV3IFJlcXVlc3QodGhpcy5zZXJ2aWNlLCAnYWRkUmVjb3JkJywgPFhtbG1jUGFyYW1zPk9iamVjdC5hc3NpZ24oe30sIHt0YWJsZX0sIG9wdGlvbmFsUGFyYW1zIHx8IHt9KSwgdGhpcy5wYXJhbU1hcC5nZXQoJ2FkZFJlY29yZCcpIHx8IFtdKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb24uc2VuZFJlcXVlc3QocmVxdWVzdClcbiAgICAgICAgfVxuXG4gICAgICAgIGRlbGV0ZVJlY29yZCh0YWJsZTogc3RyaW5nLCBrZXlWYWx1ZTogc3RyaW5nLCBvcHRpb25hbFBhcmFtcz86IHBhcmFtVHlwZXMuZGVsZXRlUmVjb3JkUGFyYW1zKTogUHJvbWlzZTxYbWxtY1Jlc3BvbnNlPiB7XG4gICAgICAgICAgICBsZXQgcmVxdWVzdCA9IG5ldyBSZXF1ZXN0KHRoaXMuc2VydmljZSwgJ2RlbGV0ZVJlY29yZCcsIDxYbWxtY1BhcmFtcz5PYmplY3QuYXNzaWduKHt9LCB7XG4gICAgICAgICAgICAgICAgdGFibGUsXG4gICAgICAgICAgICAgICAga2V5VmFsdWVcbiAgICAgICAgICAgIH0sIG9wdGlvbmFsUGFyYW1zIHx8IHt9KSwgdGhpcy5wYXJhbU1hcC5nZXQoJ2RlbGV0ZVJlY29yZCcpIHx8IFtdKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb24uc2VuZFJlcXVlc3QocmVxdWVzdClcbiAgICAgICAgfVxuXG4gICAgICAgIGdldENvbHVtbkluZm9MaXN0KGRhdGFiYXNlOiBzdHJpbmcsIHRhYmxlOiBzdHJpbmcsIG9wdGlvbmFsUGFyYW1zPzogcGFyYW1UeXBlcy5nZXRDb2x1bW5JbmZvTGlzdFBhcmFtcyk6IFByb21pc2U8WG1sbWNSZXNwb25zZT4ge1xuICAgICAgICAgICAgbGV0IHJlcXVlc3QgPSBuZXcgUmVxdWVzdCh0aGlzLnNlcnZpY2UsICdnZXRDb2x1bW5JbmZvTGlzdCcsIDxYbWxtY1BhcmFtcz5PYmplY3QuYXNzaWduKHt9LCB7XG4gICAgICAgICAgICAgICAgZGF0YWJhc2UsXG4gICAgICAgICAgICAgICAgdGFibGVcbiAgICAgICAgICAgIH0sIG9wdGlvbmFsUGFyYW1zIHx8IHt9KSwgdGhpcy5wYXJhbU1hcC5nZXQoJ2dldENvbHVtbkluZm9MaXN0JykgfHwgW10pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29ubmVjdGlvbi5zZW5kUmVxdWVzdChyZXF1ZXN0KVxuICAgICAgICB9XG5cbiAgICAgICAgZ2V0UmVjb3JkKHRhYmxlOiBzdHJpbmcsIGtleVZhbHVlOiBzdHJpbmcsIG9wdGlvbmFsUGFyYW1zPzogcGFyYW1UeXBlcy5nZXRSZWNvcmRQYXJhbXMpOiBQcm9taXNlPFhtbG1jUmVzcG9uc2U+IHtcbiAgICAgICAgICAgIGxldCByZXF1ZXN0ID0gbmV3IFJlcXVlc3QodGhpcy5zZXJ2aWNlLCAnZ2V0UmVjb3JkJywgPFhtbG1jUGFyYW1zPk9iamVjdC5hc3NpZ24oe30sIHtcbiAgICAgICAgICAgICAgICB0YWJsZSxcbiAgICAgICAgICAgICAgICBrZXlWYWx1ZVxuICAgICAgICAgICAgfSwgb3B0aW9uYWxQYXJhbXMgfHwge30pLCB0aGlzLnBhcmFtTWFwLmdldCgnZ2V0UmVjb3JkJykgfHwgW10pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29ubmVjdGlvbi5zZW5kUmVxdWVzdChyZXF1ZXN0KVxuICAgICAgICB9XG5cbiAgICAgICAgZ2V0U3RvcmVkUXVlcnlMaXN0KG9wdGlvbmFsUGFyYW1zPzogcGFyYW1UeXBlcy5nZXRTdG9yZWRRdWVyeUxpc3RQYXJhbXMpOiBQcm9taXNlPFhtbG1jUmVzcG9uc2U+IHtcbiAgICAgICAgICAgIGxldCByZXF1ZXN0ID0gbmV3IFJlcXVlc3QodGhpcy5zZXJ2aWNlLCAnZ2V0U3RvcmVkUXVlcnlMaXN0JywgPFhtbG1jUGFyYW1zPihvcHRpb25hbFBhcmFtcyB8fCB7fSksIHRoaXMucGFyYW1NYXAuZ2V0KCdnZXRTdG9yZWRRdWVyeUxpc3QnKSB8fCBbXSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uLnNlbmRSZXF1ZXN0KHJlcXVlc3QpXG4gICAgICAgIH1cblxuICAgICAgICBnZXRUYWJsZUluZm9MaXN0KGRhdGFiYXNlOiBzdHJpbmcsIG9wdGlvbmFsUGFyYW1zPzogcGFyYW1UeXBlcy5nZXRUYWJsZUluZm9MaXN0UGFyYW1zKTogUHJvbWlzZTxYbWxtY1Jlc3BvbnNlPiB7XG4gICAgICAgICAgICBsZXQgcmVxdWVzdCA9IG5ldyBSZXF1ZXN0KHRoaXMuc2VydmljZSwgJ2dldFRhYmxlSW5mb0xpc3QnLCA8WG1sbWNQYXJhbXM+T2JqZWN0LmFzc2lnbih7fSwge2RhdGFiYXNlfSwgb3B0aW9uYWxQYXJhbXMgfHwge30pLCB0aGlzLnBhcmFtTWFwLmdldCgnZ2V0VGFibGVJbmZvTGlzdCcpIHx8IFtdKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb24uc2VuZFJlcXVlc3QocmVxdWVzdClcbiAgICAgICAgfVxuXG4gICAgICAgIGludm9rZVN0b3JlZFF1ZXJ5KHN0b3JlZFF1ZXJ5OiBzdHJpbmcsIG9wdGlvbmFsUGFyYW1zPzogcGFyYW1UeXBlcy5pbnZva2VTdG9yZWRRdWVyeVBhcmFtcyk6IFByb21pc2U8WG1sbWNSZXNwb25zZT4ge1xuICAgICAgICAgICAgbGV0IHJlcXVlc3QgPSBuZXcgUmVxdWVzdCh0aGlzLnNlcnZpY2UsICdpbnZva2VTdG9yZWRRdWVyeScsIDxYbWxtY1BhcmFtcz5PYmplY3QuYXNzaWduKHt9LCB7c3RvcmVkUXVlcnl9LCBvcHRpb25hbFBhcmFtcyB8fCB7fSksIHRoaXMucGFyYW1NYXAuZ2V0KCdpbnZva2VTdG9yZWRRdWVyeScpIHx8IFtdKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb24uc2VuZFJlcXVlc3QocmVxdWVzdClcbiAgICAgICAgfVxuXG4gICAgICAgIHJ1bkRhdGFJbXBvcnQoY29uZkZpbGVOYW1lOiBzdHJpbmcsIGRhdGFGaWxlTmFtZTogc3RyaW5nLCBvcHRpb25hbFBhcmFtcz86IHBhcmFtVHlwZXMucnVuRGF0YUltcG9ydFBhcmFtcyk6IFByb21pc2U8WG1sbWNSZXNwb25zZT4ge1xuICAgICAgICAgICAgbGV0IHJlcXVlc3QgPSBuZXcgUmVxdWVzdCh0aGlzLnNlcnZpY2UsICdydW5EYXRhSW1wb3J0JywgPFhtbG1jUGFyYW1zPk9iamVjdC5hc3NpZ24oe30sIHtcbiAgICAgICAgICAgICAgICBjb25mRmlsZU5hbWUsXG4gICAgICAgICAgICAgICAgZGF0YUZpbGVOYW1lXG4gICAgICAgICAgICB9LCBvcHRpb25hbFBhcmFtcyB8fCB7fSksIHRoaXMucGFyYW1NYXAuZ2V0KCdydW5EYXRhSW1wb3J0JykgfHwgW10pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29ubmVjdGlvbi5zZW5kUmVxdWVzdChyZXF1ZXN0KVxuICAgICAgICB9XG5cbiAgICAgICAgc3FsUXVlcnkoZGF0YWJhc2U6IHN0cmluZywgcXVlcnk6IHN0cmluZywgb3B0aW9uYWxQYXJhbXM/OiBwYXJhbVR5cGVzLnNxbFF1ZXJ5UGFyYW1zKTogUHJvbWlzZTxYbWxtY1Jlc3BvbnNlPiB7XG4gICAgICAgICAgICBsZXQgcmVxdWVzdCA9IG5ldyBSZXF1ZXN0KHRoaXMuc2VydmljZSwgJ3NxbFF1ZXJ5JywgPFhtbG1jUGFyYW1zPk9iamVjdC5hc3NpZ24oe30sIHtcbiAgICAgICAgICAgICAgICBkYXRhYmFzZSxcbiAgICAgICAgICAgICAgICBxdWVyeVxuICAgICAgICAgICAgfSwgb3B0aW9uYWxQYXJhbXMgfHwge30pLCB0aGlzLnBhcmFtTWFwLmdldCgnc3FsUXVlcnknKSB8fCBbXSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uLnNlbmRSZXF1ZXN0KHJlcXVlc3QpXG4gICAgICAgIH1cblxuICAgICAgICB1cGRhdGVSZWNvcmQodGFibGU6IHN0cmluZywgb3B0aW9uYWxQYXJhbXM/OiBwYXJhbVR5cGVzLnVwZGF0ZVJlY29yZFBhcmFtcyk6IFByb21pc2U8WG1sbWNSZXNwb25zZT4ge1xuICAgICAgICAgICAgbGV0IHJlcXVlc3QgPSBuZXcgUmVxdWVzdCh0aGlzLnNlcnZpY2UsICd1cGRhdGVSZWNvcmQnLCA8WG1sbWNQYXJhbXM+T2JqZWN0LmFzc2lnbih7fSwge3RhYmxlfSwgb3B0aW9uYWxQYXJhbXMgfHwge30pLCB0aGlzLnBhcmFtTWFwLmdldCgndXBkYXRlUmVjb3JkJykgfHwgW10pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29ubmVjdGlvbi5zZW5kUmVxdWVzdChyZXF1ZXN0KVxuICAgICAgICB9XG4gICAgfVxuXG4iXX0=